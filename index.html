<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>Hexo</title>
  <meta name="author" content="Xiaobo Hu" />

  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  
  <meta property="og:site_name" content="Hexo" />

  
  

  
    <meta property="og:image" content="undefined" />
  

  
  <link href="/css/images/favicon.ico" rel="icon" />
  

  <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  


  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>

</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Hexo</a></h1>
  <h2><a href="/"></a></h2>
</div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="/">Home</a></li>
    
      <li><a href="/archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="[layout]">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-04-26T04:13:33.000Z"><a href="/2016/04/26/XUtils的简单介绍/">2016-04-26</a></time>
      
      
  
    <h1 class="title"><a href="/2016/04/26/XUtils的简单介绍/">XUtils的简单介绍</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="xUtils3简介"><a href="#xUtils3简介" class="headerlink" title="xUtils3简介"></a>xUtils3简介</h2><ul>
<li>xUtils 包含了很多实用的android工具.</li>
<li>xUtils 支持超大文件(超过2G)上传，更全面的http请求协议支持(11种谓词)，拥有更加灵活的ORM，更多的事件注解支持且不受混淆影响…</li>
<li>xUtils 最低兼容Android 4.0 (api level 14). (<a href="https://github.com/wyouflf/xUtils3/issues/8" target="_blank" rel="external">Android 2.3?</a>)</li>
<li>xUtils3变化较多所以建立了新的项目不在旧版(github.com/wyouflf/xUtils)上继续维护, 相对于旧版本:<ol>
<li>HTTP实现替换HttpClient为UrlConnection, 自动解析回调泛型, 更安全的断点续传策略.</li>
<li>支持标准的Cookie策略, 区分domain, path…</li>
<li>事件注解去除不常用的功能, 提高性能.</li>
<li>数据库api简化提高性能, 达到和greenDao一致的性能.</li>
<li>图片绑定支持gif(受系统兼容性影响, 部分gif文件只能静态显示), webp; 支持圆角, 圆形, 方形等裁剪, 支持自动旋转…</li>
</ol>
</li>
</ul>
<h4 id="使用Gradle构建时添加一下依赖即可"><a href="#使用Gradle构建时添加一下依赖即可" class="headerlink" title="使用Gradle构建时添加一下依赖即可:"></a>使用Gradle构建时添加一下依赖即可:</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">compile <span class="string">'org.xutils:xutils:3.3.34'</span></span><br></pre></td></tr></table></figure>
<h5 id="如果使用eclipse可以-点击这里下载aar文件-然后用zip解压-取出jar包和so文件"><a href="#如果使用eclipse可以-点击这里下载aar文件-然后用zip解压-取出jar包和so文件" class="headerlink" title="如果使用eclipse可以 点击这里下载aar文件, 然后用zip解压, 取出jar包和so文件."></a>如果使用eclipse可以 <a href="http://dl.bintray.com/wyouflf/maven/org/xutils/xutils/" target="_blank" rel="external">点击这里下载aar文件</a>, 然后用zip解压, 取出jar包和so文件.</h5><h5 id="混淆配置参考示例项目sample的配置"><a href="#混淆配置参考示例项目sample的配置" class="headerlink" title="混淆配置参考示例项目sample的配置"></a>混淆配置参考示例项目sample的配置</h5><h4 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题:"></a>常见问题:</h4><ol>
<li>更好的管理图片缓存: <a href="https://github.com/wyouflf/xUtils3/issues/149" target="_blank" rel="external">https://github.com/wyouflf/xUtils3/issues/149</a></li>
<li>Cookie的使用: <a href="https://github.com/wyouflf/xUtils3/issues/125" target="_blank" rel="external">https://github.com/wyouflf/xUtils3/issues/125</a></li>
<li>关于query参数? http请求可以通过 header, url, body(请求体)传参; query参数是url中问号(?)后面的参数.</li>
<li>关于body参数? body参数只有PUT, POST, PATCH, DELETE(老版本RFC2616文档没有明确指出它是否支持, 所以暂时支持)请求支持.</li>
<li>自定义Http参数对象和结果解析: <a href="https://github.com/wyouflf/xUtils3/issues/191" target="_blank" rel="external">https://github.com/wyouflf/xUtils3/issues/191</a></li>
</ol>
<h4 id="使用前配置"><a href="#使用前配置" class="headerlink" title="使用前配置"></a>使用前配置</h4><h5 id="需要的权限"><a href="#需要的权限" class="headerlink" title="需要的权限"></a>需要的权限</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.INTERNET"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在application的onCreate中初始化</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onCreate();</span><br><span class="line">    x.Ext.init(<span class="keyword">this</span>);</span><br><span class="line">    x.Ext.setDebug(BuildConfig.DEBUG); <span class="comment">// 是否输出debug日志, 开启debug会影响性能.</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="使用-Event事件注解-ContentView-ViewInject等更多示例参考sample项目"><a href="#使用-Event事件注解-ContentView-ViewInject等更多示例参考sample项目" class="headerlink" title="使用@Event事件注解(@ContentView, @ViewInject等更多示例参考sample项目)"></a>使用@Event事件注解(@ContentView, @ViewInject等更多示例参考sample项目)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 1. 方法必须私有限定,</span><br><span class="line"> * 2. 方法参数形式必须和type对应的Listener接口一致.</span><br><span class="line"> * 3. 注解参数value支持数组: value=&#123;id1, id2, id3&#125;</span><br><span class="line"> * 4. 其它参数说明见&#123;<span class="doctag">@link</span> org.xutils.event.annotation.Event&#125;类的说明.</span><br><span class="line"> **/</span></span><br><span class="line"><span class="meta">@Event</span>(value = R.id.btn_test_baidu1,</span><br><span class="line">        type = View.OnClickListener.class<span class="comment">/*可选参数, 默认是View.OnClickListener.class*/</span>)</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onTestBaidu1Click</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="访问网络-更多示例参考sample项目"><a href="#访问网络-更多示例参考sample项目" class="headerlink" title="访问网络(更多示例参考sample项目)"></a>访问网络(更多示例参考sample项目)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> * 自定义实体参数类请参考:</span><br><span class="line"> * 请求注解 &#123;<span class="doctag">@link</span> org.xutils.http.annotation.HttpRequest&#125;</span><br><span class="line"> * 请求注解处理模板接口 &#123;<span class="doctag">@link</span> org.xutils.http.app.ParamsBuilder&#125;</span><br><span class="line"> *</span><br><span class="line"> * 需要自定义类型作为callback的泛型时, 参考:</span><br><span class="line"> * 响应注解 &#123;<span class="doctag">@link</span> org.xutils.http.annotation.HttpResponse&#125;</span><br><span class="line"> * 响应注解处理模板接口 &#123;<span class="doctag">@link</span> org.xutils.http.app.ResponseParser&#125;</span><br><span class="line"> *</span><br><span class="line"> * 示例: 查看 org.xutils.sample.http 包里的代码</span><br><span class="line"> */</span></span><br><span class="line">BaiduParams params = <span class="keyword">new</span> BaiduParams();</span><br><span class="line">params.wd = <span class="string">"xUtils"</span>;</span><br><span class="line"><span class="comment">// 有上传文件时使用multipart表单, 否则上传原始文件流.</span></span><br><span class="line"><span class="comment">// params.setMultipart(true);</span></span><br><span class="line"><span class="comment">// 上传文件方式 1</span></span><br><span class="line"><span class="comment">// params.uploadFile = new File("/sdcard/test.txt");</span></span><br><span class="line"><span class="comment">// 上传文件方式 2</span></span><br><span class="line"><span class="comment">// params.addBodyParameter("uploadFile", new File("/sdcard/test.txt"));</span></span><br><span class="line">Callback.Cancelable cancelable</span><br><span class="line">       = x.http().get(params,</span><br><span class="line">       <span class="comment">/**</span><br><span class="line">        * 1. callback的泛型:</span><br><span class="line">        * callback参数默认支持的泛型类型参见&#123;<span class="doctag">@link</span> org.xutils.http.loader.LoaderFactory&#125;,</span><br><span class="line">        * 例如: 指定泛型为File则可实现文件下载, 使用params.setSaveFilePath(path)指定文件保存的全路径.</span><br><span class="line">        * 默认支持断点续传(采用了文件锁和尾端校验续传文件的一致性).</span><br><span class="line">        * 其他常用类型可以自己在LoaderFactory中注册,</span><br><span class="line">        * 也可以使用&#123;<span class="doctag">@link</span> org.xutils.http.annotation.HttpResponse&#125;</span><br><span class="line">        * 将注解HttpResponse加到自定义返回值类型上, 实现自定义ResponseParser接口来统一转换.</span><br><span class="line">        * 如果返回值是json形式, 那么利用第三方的json工具将十分容易定义自己的ResponseParser.</span><br><span class="line">        * 如示例代码&#123;<span class="doctag">@link</span> org.xutils.sample.http.BaiduResponse&#125;, 可直接使用BaiduResponse作为</span><br><span class="line">        * callback的泛型.</span><br><span class="line">        *</span><br><span class="line">        * 2. callback的组合:</span><br><span class="line">        * 可以用基类或接口组合个种类的Callback, 见&#123;<span class="doctag">@link</span> org.xutils.common.Callback&#125;.</span><br><span class="line">        * 例如:</span><br><span class="line">        * a. 组合使用CacheCallback将使请求检测缓存或将结果存入缓存(仅GET请求生效).</span><br><span class="line">        * b. 组合使用PrepareCallback的prepare方法将为callback提供一次后台执行耗时任务的机会,</span><br><span class="line">        * 然后将结果给onCache或onSuccess.</span><br><span class="line">        * c. 组合使用ProgressCallback将提供进度回调.</span><br><span class="line">        * ...(可参考&#123;<span class="doctag">@link</span> org.xutils.image.ImageLoader&#125;</span><br><span class="line">        * 或 示例代码中的 &#123;<span class="doctag">@link</span> org.xutils.sample.download.DownloadCallback&#125;)</span><br><span class="line">        *</span><br><span class="line">        * 3. 请求过程拦截或记录日志: 参考 &#123;<span class="doctag">@link</span> org.xutils.http.app.RequestTracker&#125;</span><br><span class="line">        *</span><br><span class="line">        * 4. 请求Header获取: 参考 &#123;<span class="doctag">@link</span> org.xutils.http.app.RequestInterceptListener&#125;</span><br><span class="line">        *</span><br><span class="line">        * 5. 其他(线程池, 超时, 重定向, 重试, 代理等): 参考 &#123;<span class="doctag">@link</span> org.xutils.http.RequestParams&#125;</span><br><span class="line">        *</span><br><span class="line">        **/</span></span><br><span class="line">       <span class="keyword">new</span> Callback.CommonCallback&lt;String&gt;() &#123;</span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String result)</span> </span>&#123;</span><br><span class="line">               Toast.makeText(x.app(), result, Toast.LENGTH_LONG).show();</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable ex, <span class="keyword">boolean</span> isOnCallback)</span> </span>&#123;</span><br><span class="line">               <span class="comment">//Toast.makeText(x.app(), ex.getMessage(), Toast.LENGTH_LONG).show();</span></span><br><span class="line">               <span class="keyword">if</span> (ex <span class="keyword">instanceof</span> HttpException) &#123; <span class="comment">// 网络错误</span></span><br><span class="line">                   HttpException httpEx = (HttpException) ex;</span><br><span class="line">                   <span class="keyword">int</span> responseCode = httpEx.getCode();</span><br><span class="line">                   String responseMsg = httpEx.getMessage();</span><br><span class="line">                   String errorResult = httpEx.getResult();</span><br><span class="line">                   <span class="comment">// ...</span></span><br><span class="line">               &#125; <span class="keyword">else</span> &#123; <span class="comment">// 其他错误</span></span><br><span class="line">                   <span class="comment">// ...</span></span><br><span class="line">               &#125;</span><br><span class="line">               Toast.makeText(x.app(), ex.getMessage(), Toast.LENGTH_LONG).show();</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancelled</span><span class="params">(CancelledException cex)</span> </span>&#123;</span><br><span class="line">               Toast.makeText(x.app(), <span class="string">"cancelled"</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           <span class="meta">@Override</span></span><br><span class="line">           <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFinished</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">           &#125;</span><br><span class="line">       &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// cancelable.cancel(); // 取消请求</span></span><br></pre></td></tr></table></figure>
<h4 id="如果你只需要一个简单的版本"><a href="#如果你只需要一个简单的版本" class="headerlink" title="如果你只需要一个简单的版本:"></a>如果你只需要一个简单的版本:</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Event</span>(value = R.id.btn_test_baidu2)</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onTestBaidu2Click</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">    RequestParams params = <span class="keyword">new</span> RequestParams(<span class="string">"https://www.baidu.com/s"</span>);</span><br><span class="line">    params.setSslSocketFactory(...); <span class="comment">// 设置ssl</span></span><br><span class="line">    params.addQueryStringParameter(<span class="string">"wd"</span>, <span class="string">"xUtils"</span>);</span><br><span class="line">    x.http().get(params, <span class="keyword">new</span> Callback.CommonCallback&lt;String&gt;() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String result)</span> </span>&#123;</span><br><span class="line">            Toast.makeText(x.app(), result, Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable ex, <span class="keyword">boolean</span> isOnCallback)</span> </span>&#123;</span><br><span class="line">            Toast.makeText(x.app(), ex.getMessage(), Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancelled</span><span class="params">(CancelledException cex)</span> </span>&#123;</span><br><span class="line">            Toast.makeText(x.app(), <span class="string">"cancelled"</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFinished</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">`</span><br></pre></td></tr></table></figure>
<h4 id="带有缓存的请求示例"><a href="#带有缓存的请求示例" class="headerlink" title="带有缓存的请求示例:"></a>带有缓存的请求示例:</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">BaiduParams params = <span class="keyword">new</span> BaiduParams();</span><br><span class="line">params.wd = <span class="string">"xUtils"</span>;</span><br><span class="line"><span class="comment">// 默认缓存存活时间, 单位:毫秒.(如果服务没有返回有效的max-age或Expires)</span></span><br><span class="line">params.setCacheMaxAge(<span class="number">1000</span> * <span class="number">60</span>);</span><br><span class="line">Callback.Cancelable cancelable</span><br><span class="line">		<span class="comment">// 使用CacheCallback, xUtils将为该请求缓存数据.</span></span><br><span class="line">		= x.http().get(params, <span class="keyword">new</span> Callback.CacheCallback&lt;String&gt;() &#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> hasError = <span class="keyword">false</span>;</span><br><span class="line">	<span class="keyword">private</span> String result = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCache</span><span class="params">(String result)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 得到缓存数据, 缓存过期后不会进入这个方法.</span></span><br><span class="line">		<span class="comment">// 如果服务端没有返回过期时间, 参考params.setCacheMaxAge(maxAge)方法.</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// * 客户端会根据服务端返回的 header 中 max-age 或 expires 来确定本地缓存是否给 onCache 方法.</span></span><br><span class="line">        <span class="comment">//   如果服务端没有返回 max-age 或 expires, 那么缓存将一直保存, 除非这里自己定义了返回false的</span></span><br><span class="line">        <span class="comment">//   逻辑, 那么xUtils将请求新数据, 来覆盖它.</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// * 如果信任该缓存返回 true, 将不再请求网络;</span></span><br><span class="line">        <span class="comment">//   返回 false 继续请求网络, 但会在请求头中加上ETag, Last-Modified等信息,</span></span><br><span class="line">        <span class="comment">//   如果服务端返回304, 则表示数据没有更新, 不继续加载数据.</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="keyword">this</span>.result = result;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>; <span class="comment">// true: 信任缓存数据, 不在发起网络请求; false不信任缓存数据.</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSuccess</span><span class="params">(String result)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// 注意: 如果服务返回304 或 onCache 选择了信任缓存, 这时result为null.</span></span><br><span class="line">        <span class="keyword">if</span> (result != <span class="keyword">null</span>) &#123;</span><br><span class="line">		    <span class="keyword">this</span>.result = result;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onError</span><span class="params">(Throwable ex, <span class="keyword">boolean</span> isOnCallback)</span> </span>&#123;</span><br><span class="line">		hasError = <span class="keyword">true</span>;</span><br><span class="line">		Toast.makeText(x.app(), ex.getMessage(), Toast.LENGTH_LONG).show();</span><br><span class="line">		<span class="keyword">if</span> (ex <span class="keyword">instanceof</span> HttpException) &#123; <span class="comment">// 网络错误</span></span><br><span class="line">			HttpException httpEx = (HttpException) ex;</span><br><span class="line">			<span class="keyword">int</span> responseCode = httpEx.getCode();</span><br><span class="line">			String responseMsg = httpEx.getMessage();</span><br><span class="line">			String errorResult = httpEx.getResult();</span><br><span class="line">			<span class="comment">// ...</span></span><br><span class="line">		&#125; <span class="keyword">else</span> &#123; <span class="comment">// 其他错误</span></span><br><span class="line">			<span class="comment">// ...</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCancelled</span><span class="params">(CancelledException cex)</span> </span>&#123;</span><br><span class="line">		Toast.makeText(x.app(), <span class="string">"cancelled"</span>, Toast.LENGTH_LONG).show();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onFinished</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (!hasError &amp;&amp; result != <span class="keyword">null</span>) &#123;</span><br><span class="line">			<span class="comment">// 成功获取数据</span></span><br><span class="line">			Toast.makeText(x.app(), result, Toast.LENGTH_LONG).show();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="使用数据库-更多示例参考sample项目"><a href="#使用数据库-更多示例参考sample项目" class="headerlink" title="使用数据库(更多示例参考sample项目)"></a>使用数据库(更多示例参考sample项目)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Parent test = db.selector(Parent.class).where(<span class="string">"id"</span>, <span class="string">"in"</span>, <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">6</span>&#125;).findFirst();</span><br><span class="line"><span class="keyword">long</span> count = db.selector(Parent.class).where(<span class="string">"name"</span>, <span class="string">"LIKE"</span>, <span class="string">"w%"</span>).and(<span class="string">"age"</span>, <span class="string">"&gt;"</span>, <span class="number">32</span>).count();</span><br><span class="line">List&lt;Parent&gt; testList = db.selector(Parent.class).where(<span class="string">"id"</span>, <span class="string">"between"</span>, <span class="keyword">new</span> String[]&#123;<span class="string">"1"</span>, <span class="string">"5"</span>&#125;).findAll();</span><br></pre></td></tr></table></figure>
<h3 id="绑定图片-更多示例参考sample项目"><a href="#绑定图片-更多示例参考sample项目" class="headerlink" title="绑定图片(更多示例参考sample项目)"></a>绑定图片(更多示例参考sample项目)</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x.image().bind(imageView, url, imageOptions);</span><br><span class="line"></span><br><span class="line"><span class="comment">// assets file</span></span><br><span class="line">x.image().bind(imageView, <span class="string">"assets://test.gif"</span>, imageOptions);</span><br><span class="line"></span><br><span class="line"><span class="comment">// local file</span></span><br><span class="line">x.image().bind(imageView, <span class="keyword">new</span> File(<span class="string">"/sdcard/test.gif"</span>).toURI().toString(), imageOptions);</span><br><span class="line">x.image().bind(imageView, <span class="string">"/sdcard/test.gif"</span>, imageOptions);</span><br><span class="line">x.image().bind(imageView, <span class="string">"file:///sdcard/test.gif"</span>, imageOptions);</span><br><span class="line">x.image().bind(imageView, <span class="string">"file:/sdcard/test.gif"</span>, imageOptions);</span><br><span class="line"></span><br><span class="line">x.image().bind(imageView, url, imageOptions, <span class="keyword">new</span> Callback.CommonCallback&lt;Drawable&gt;() &#123;...&#125;);</span><br><span class="line">x.image().loadDrawable(url, imageOptions, <span class="keyword">new</span> Callback.CommonCallback&lt;Drawable&gt;() &#123;...&#125;);</span><br><span class="line">x.image().loadFile(url, imageOptions, <span class="keyword">new</span> Callback.CommonCallback&lt;File&gt;() &#123;...&#125;);</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="关于libwebpbackport"><a href="#关于libwebpbackport" class="headerlink" title="关于libwebpbackport"></a>关于libwebpbackport</h3><ul>
<li>部分4.x的机型对webp格式的支持仍然有问题, 需要借助webp.</li>
<li>webp来自:<a href="https://github.com/webmproject/libwebp" target="_blank" rel="external">https://github.com/webmproject/libwebp</a></li>
<li>webpbackport来自:<a href="https://github.com/alexey-pelykh/webp-android-backport" target="_blank" rel="external">https://github.com/alexey-pelykh/webp-android-backport</a></li>
<li>xUtils在使用webpbackport时为其添加了nativeDecodeFile的实现, 并修复其在Android 5.0及以上系统存在bug:<br>jni代码见: <a href="https://github.com/wyouflf/webp-android-backport/commits/master" target="_blank" rel="external">https://github.com/wyouflf/webp-android-backport/commits/master</a></li>
</ul>
<hr>
<h3 id="关于作者"><a href="#关于作者" class="headerlink" title="关于作者"></a>关于作者</h3><ul>
<li>Email： <a href="&#109;&#x61;&#105;&#108;&#x74;&#x6f;&#x3a;&#119;&#121;&#x6f;&#x75;&#102;&#x6c;&#102;&#64;&#113;&#113;&#x2e;&#99;&#x6f;&#x6d;">&#119;&#121;&#x6f;&#x75;&#102;&#x6c;&#102;&#64;&#113;&#113;&#x2e;&#99;&#x6f;&#x6d;</a>, <a href="&#109;&#x61;&#x69;&#x6c;&#116;&#111;&#x3a;&#119;&#x79;&#x6f;&#x75;&#102;&#x6c;&#102;&#64;&#103;&#x6d;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#109;">&#119;&#x79;&#x6f;&#x75;&#102;&#x6c;&#102;&#64;&#103;&#x6d;&#97;&#x69;&#x6c;&#x2e;&#99;&#111;&#109;</a></li>
<li>有任何建议或者使用中遇到问题都可以给我发邮件, 你也可以加入QQ群：330445659(已满), 275967695, 257323060,<br>384426013, 176778777, 169852490, 261053948, 330108003, 技术交流，idea分享 <em>_</em></li>
</ul>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/XUtils3/">XUtils3</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-03-17T08:05:46.000Z"><a href="/2016/03/17/Fresco详解/">2016-03-17</a></time>
      
      
  
    <h1 class="title"><a href="/2016/03/17/Fresco详解/"></a></h1>
  

    </header>
    <div class="entry">
      
        <p><link href="http://static.blog.csdn.net/css/comment1.css" type="text/css" rel="stylesheet"></p>
<p><link href="http://static.blog.csdn.net/css/style1.css" type="text/css" rel="stylesheet"></p>
<script language="JavaScript" type="text/javascript" src="http://download.csdn.net/js/jquery.cookie.js"></script>
<script type="text/javascript" src="http://c.csdnimg.cn/rabbit/search-service/main.js"></script>
<link rel="stylesheet" href="http://static.blog.csdn.net/public/res-min/markdown_views.css?v=1.0">
<link rel="stylesheet" href="http://static.blog.csdn.net/css/category.css?v=1.0">
<script type="text/javascript" src="http://static.blog.csdn.net/public/res/bower-libs/MathJax/MathJax.js?config=TeX-AMS_HTML"></script>

 <script type="text/javascript" src="http://static.blog.csdn.net/scripts/web-storage-cache.min.js"></script>


  <script type="text/ecmascript">
      window.quickReplyflag = true;

            var isBole = false;


    </script>
<div id="article_details" class="details">
    <div class="article_title">   
         <span class="ico ico_type_Original"></span>


    <h1>
        <span class="link_title"><a href="/y1scp/article/details/49245535">
        Android图片加载神器之Fresco-加载图片基础[详细图解Fresco的使用]            
        </a></span>
    </h1>
</div>



        <div class="article_manage clearfix">
        <div class="article_l">
            <span class="link_categories">
            标签：
              <a href="http://www.csdn.net/tag/android" target="_blank" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_tag']);">android</a><a href="http://www.csdn.net/tag/Fresco" target="_blank" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_tag']);">Fresco</a><a href="http://www.csdn.net/tag/SimpleDraw" target="_blank" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_tag']);">SimpleDraw</a><a href="http://www.csdn.net/tag/%e5%8a%a0%e8%bd%bd%e5%9b%be%e7%89%87" target="_blank" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_tag']);">加载图片</a>
            </span>
        </div>
        <div class="article_r">
            <span class="link_postdate">2015-10-19 08:13</span>
            <span class="link_view" title="阅读次数">6037人阅读</span>
            <span class="link_comments" title="评论次数"> <a href="#comments" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_pinglun'])">评论</a>(15)</span>
            <span class="link_collect tracking-ad" data-mod="popu_171"> <a href="javascript:void(0);" onclick="javascript:collectArticle('Android图片加载神器之Fresco-加载图片基础[详细图解Fresco的使用]','49245535');return false;" title="收藏" target="_blank" rel="external">收藏</a></span>
             <span class="link_report"> <a href="#report" onclick="javascript:report(49245535,2);return false;" title="举报">举报</a></span>

        </div>
    </div>
    <div class="embody" style="display:none" id="embody">
        <span class="embody_t">本文章已收录于：</span>
        <div class="embody_c" id="lib" value="{&quot;err&quot;:0,&quot;msg&quot;:&quot;ok&quot;,&quot;data&quot;:[]}"></div>
    </div>
    <style type="text/css">        
            .embody{
                padding:10px 10px 10px;
                margin:0 -20px;
                border-bottom:solid 1px #ededed;                
            }
            .embody_b{
                margin:0 ;
                padding:10px 0;
            }
            .embody .embody_t,.embody .embody_c{
                display: inline-block;
                margin-right:10px;
            }
            .embody_t{
                font-size: 12px;
                color:#999;
            }
            .embody_c{
                font-size: 12px;
            }
            .embody_c img,.embody_c em{
                display: inline-block;
                vertical-align: middle;               
            }
             .embody_c img{               
                width:30px;
                height:30px;
            }
            .embody_c em{
                margin: 0 20px 0 10px;
                color:#333;
                font-style: normal;
            }
    </style>
    <script type="text/javascript">
        $(function () {
            var lib = eval("("+$("#lib").attr("value")+")");
            var html = "";
            if (lib.err == 0) {
                $.each(lib.data, function (i) {
                    var obj = lib.data[i];
                    //html += '<img src="' + obj.logo + '"/>' + obj.name + "&nbsp;&nbsp;";
                    html += ' <a href="' + obj.url + '" target="_blank">';
                    html += ' <img src="' + obj.logo + '">';
                    html += ' <em><b>' + obj.name + '</b></em>';
                    html += ' </a>';
                });
                if (html != "") {
                    setTimeout(function () {
                        $("#lib").html(html);
                        /*
                        var testhtml = "";
                        testhtml += '<a href="#">';
                        testhtml += '<img src="http://img.knowledge.csdn.net/upload/base/1455589744328_328.jpg">';
                        testhtml += '<em>Android知识库</em>';
                        testhtml += '</a>';
                        $(".embody_c").html(testhtml);
                        */
                        $("#embody").show();
                    }, 100);
                }
            }          

        });
    </script>
      <div class="category clearfix">
        <div class="category_l">
           <img src="http://static.blog.csdn.net/images/category_icon.jpg">
            <span>分类：</span>
        </div>
        <div class="category_r">
                    <label onclick="GetCategoryArticles('3142345','y1scp','top','49245535');">
                        <span onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_fenlei']);">Android中级篇<em>（12）</em></span>
                      <img class="arrow-down" src="http://static.blog.csdn.net/images/arrow_triangle _down.jpg" style="display:inline;">
                      <img class="arrow-up" src="http://static.blog.csdn.net/images/arrow_triangle_up.jpg" style="display:none;">
                        <div class="subItem">
                            <div class="subItem_t"><a href="http://blog.csdn.net/y1scp/article/category/3142345" target="_blank">作者同类文章</a><i class="J_close">X</i></div>
                            <ul class="subItem_l" id="top_3142345">                            
                            </ul>
                        </div>
                    </label>                    
        </div>
    </div>
    <script type="text/javascript" src="http://static.blog.csdn.net/scripts/category.js"></script>  
        <div class="bog_copyright">         
            <p class="copyright_p">版权声明：本文为博主原创文章，未经博主允许不得转载。</p>
        </div>







<div id="article_content" class="article_content">
        <div class="markdown_views"><h1 id="fresco简单的使用simpledraweeview">Fresco简单的使用—SimpleDraweeView</h1>

<ul>
<li><h4 id="百学须先立志学前须知">百学须先立志—学前须知：</h4>

<p>在我们平时加载图片(不管是下载还是加载本地图片…..)的时候，我们经常会遇到这样一个需求，那就是当图片正在加载时应该呈现正在加载时的图像，当图片加载失败时应该呈现图片加载时的图像，当我们重新加载这张图片时，应该呈现重试时图像，直到这张图片加载完成。这些繁琐并且重复的如果得不到简化的话，那将是一个开发人员的噩梦，现在好了，我们用 <strong>Facebook</strong> 出品的一个强大的图片加载组件 <strong>Fresco</strong> 几行代码就可以搞定以上问题了。</p></li>
<li><h4 id="尽信书不如无书能学到什么">尽信书，不如无书—能学到什么？</h4>

<p>1、SimpleDraweeView最基本的使用 <br>
2、SimpleDraweeView的圆形图 <br>
3、SimpleDraweeView的圆角图 <br>
4、SimpleDraweeView的缩放类型</p></li>
<li><h4 id="工欲善其事必先利其器下载fresco并导入到项目">工欲善其事必先利其器—下载Fresco并导入到项目</h4>

<p>Fresco中文说明：<a href="http://www.fresco-cn.org/" target="_blank" rel="external">http://www.fresco-cn.org/</a></p>

<p>Fresco项目GitHub地址：<a href="https://github.com/facebook/fresco" target="_blank" rel="external">https://github.com/facebook/fresco</a></p>

<p>第一步进入 <strong>Fresco项目GitHub地址</strong> ：</p>

<p><img src="http://img.blog.csdn.net/20151014140859679" alt="第一步" title=""></p>

<p>第二步添加Fresco到项目工程：</p>

<p><img src="http://img.blog.csdn.net/20151014140430949" alt="使用说明" title=""></p>

<p>第三步服务及权限：</p>

<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-comment">&lt;!-- 访问网络的权限 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">uses-permission</span> <span class="hljs-attribute">android:name</span>=<span class="hljs-value">"android.permission.INTERNET"</span>/&gt;</span></code></pre>

<p><img src="http://img.blog.csdn.net/20151014144038688" alt="服务及权限" title=""></p></li>
<li><h4 id="常见问题">常见问题：</h4>

<p>初次使用，我们就先简单书写我们的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_adv"</span>
        android:layout_width=<span class="hljs-string">"300dp"</span>
        android:layout_height=<span class="hljs-string">"300dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码分析：</p>

<p><img src="http://img.blog.csdn.net/20151014170711232" alt="初次加载" title=""></p>

<p><strong>MainActivity</strong> 实现代码：</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> {</span>

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
}</code></pre>

<p>简单的书写完布局和实现代码之后我们来运行一下。</p>

<pre class="prettyprint"><code class=" hljs avrasm">        java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.RuntimeException</span>: Unable to start activity ComponentInfo{scp<span class="hljs-preprocessor">.com</span><span class="hljs-preprocessor">.frescodemo</span>/scp<span class="hljs-preprocessor">.com</span><span class="hljs-preprocessor">.frescodemo</span><span class="hljs-preprocessor">.MainActivity</span>}: 

<span class="hljs-label">android.view.InflateException:</span> Binary XML file line <span class="hljs-preprocessor">#5: Error inflating class com.facebook.drawee.view.SimpleDraweeView</span>
                at android<span class="hljs-preprocessor">.app</span><span class="hljs-preprocessor">.ActivityThread</span><span class="hljs-preprocessor">.performLaunchActivity</span>(ActivityThread<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">2264</span>)
                at android<span class="hljs-preprocessor">.app</span><span class="hljs-preprocessor">.ActivityThread</span><span class="hljs-preprocessor">.handleLaunchActivity</span>(ActivityThread<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">2313</span>)
                at android<span class="hljs-preprocessor">.app</span><span class="hljs-preprocessor">.ActivityThread</span><span class="hljs-preprocessor">.access</span>$1100(ActivityThread<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">141</span>)
                at android<span class="hljs-preprocessor">.app</span><span class="hljs-preprocessor">.ActivityThread</span>$H<span class="hljs-preprocessor">.handleMessage</span>(ActivityThread<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">1238</span>)
                at android<span class="hljs-preprocessor">.os</span><span class="hljs-preprocessor">.Handler</span><span class="hljs-preprocessor">.dispatchMessage</span>(Handler<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">102</span>)
                at android<span class="hljs-preprocessor">.os</span><span class="hljs-preprocessor">.Looper</span><span class="hljs-preprocessor">.loop</span>(Looper<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">136</span>)
                at android<span class="hljs-preprocessor">.app</span><span class="hljs-preprocessor">.ActivityThread</span><span class="hljs-preprocessor">.main</span>(ActivityThread<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">5336</span>)
                at java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.reflect</span><span class="hljs-preprocessor">.Method</span><span class="hljs-preprocessor">.invokeNative</span>(Native Method)
                at java<span class="hljs-preprocessor">.lang</span><span class="hljs-preprocessor">.reflect</span><span class="hljs-preprocessor">.Method</span><span class="hljs-preprocessor">.invoke</span>(Method<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">515</span>)
                at <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.android</span><span class="hljs-preprocessor">.internal</span><span class="hljs-preprocessor">.os</span><span class="hljs-preprocessor">.ZygoteInit</span>$MethodAndArgsCaller<span class="hljs-preprocessor">.run</span>(ZygoteInit<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">871</span>)
                at <span class="hljs-keyword">com</span><span class="hljs-preprocessor">.android</span><span class="hljs-preprocessor">.internal</span><span class="hljs-preprocessor">.os</span><span class="hljs-preprocessor">.ZygoteInit</span><span class="hljs-preprocessor">.main</span>(ZygoteInit<span class="hljs-preprocessor">.java</span>:<span class="hljs-number">687</span>)
                at dalvik<span class="hljs-preprocessor">.system</span><span class="hljs-preprocessor">.NativeStart</span><span class="hljs-preprocessor">.main</span>(Native Method)
         Caused by: android<span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.InflateException</span>: Binary XML file line <span class="hljs-preprocessor">#5: Error inflating class com.facebook.drawee.view.SimpleDraweeView</span></code></pre>

<p><img src="http://img.blog.csdn.net/20151014171230196" alt="报错" title=""></p>

<p>运行报错了！怎么回事呢？这里啊，是因为我们没有在应用调用 setContentView() 之前进行初始化Fresco造成的；解决办法：</p>

<p>修改我们的 <strong>MainActivity</strong> 里代码：</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> {</span>

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        Fresco.initialize(<span class="hljs-keyword">this</span>);
        setContentView(R.layout.activity_main);
    }
}</code></pre>

<p><img src="http://img.blog.csdn.net/20151014172430043" alt="解决办法" title=""></p>

<p>再运行就没有错误发生了。</p></li>
<li><h4 id="占位图placeholderimage">占位图—placeholderImage：</h4>

<p>在此之前我们需要一张占位图 <strong>icon_placeholder.png</strong> 大家右键另存为即可：</p>

<p><img src="http://img.blog.csdn.net/20151014174249858" alt="icon_placeholder" title=""></p>

<p>修改我们的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_adv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"fitCenter"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151014174136986" alt="占位符" title=""></p>

<p><strong>MainActivity</strong> 无需修改，运行一下：</p>

<p><img src="http://img.blog.csdn.net/20151014174714655" alt="占位符" title=""></p></li>
<li><h4 id="正在加载图progressbarimage">正在加载图—progressBarImage：</h4>

<p>在此之前我们需要一张正在加载图 <strong>icon_progress_bar.png</strong> 大家右键另存为即可：</p>

<p><img src="http://img.blog.csdn.net/20151014191932701" alt="正在加载图" title=""></p>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"fitCenter"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151014181109140" alt="正在加载图" title=""></p>

<p>更改我们的 <strong>MainActivity</strong> 里代码：</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> {</span>

    <span class="hljs-keyword">private</span> SimpleDraweeView simpleDraweeView;

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        Fresco.initialize(<span class="hljs-keyword">this</span>);
        setContentView(R.layout.activity_main);
        initView();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initView</span>() {
        <span class="hljs-comment">//创建SimpleDraweeView对象</span>
        simpleDraweeView = (SimpleDraweeView) findViewById(R.id.main_sdv);
        <span class="hljs-comment">//创建将要下载的图片的URI</span>
        Uri imageUri = Uri.parse(<span class="hljs-string">"http://my.csdn.net/uploads/avatar/4/E/8/1_y1scp.jpg"</span>);
        <span class="hljs-comment">//开始下载</span>
        simpleDraweeView.setImageURI(imageUri);
    }
}</code></pre>

<p>代码分析：</p>

<p><img src="http://img.blog.csdn.net/20151014183202667" alt="正在加载图" title=""></p>

<p>运行效果图：</p>

<p><img src="http://img.blog.csdn.net/20151014191754520" alt="正在加载图" title=""></p>

<p>正在加载图本身是不可以转的，但是呢，加上了 <code>fresco:progressBarAutoRotateInterval="5000"</code> 属性，那么它就可以旋转了；可以看到，正在加载图一闪而过，这是因为我们加载的图片很小，网络也很好。</p></li>
<li><h4 id="失败图failureimage">失败图—failureImage：</h4>

<p>在此之前我们需要一张正在加载图 <strong>icon_failure.png</strong> 大家右键另存为即可：</p>

<p><img src="http://img.blog.csdn.net/20151015101244652" alt="icon_failure" title=""></p>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"fitCenter"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        fresco:failureImage=<span class="hljs-string">"@mipmap/icon_failure"</span>
        fresco:failureImageScaleType=<span class="hljs-string">"centerInside"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码分析：</p>

<p><img src="http://img.blog.csdn.net/20151015101828750" alt="失败图代码分析" title=""></p>

<p>修改我们的 <strong>MainActivity</strong> 里代码：</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> {</span>

    <span class="hljs-keyword">private</span> SimpleDraweeView simpleDraweeView;

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        Fresco.initialize(<span class="hljs-keyword">this</span>);
        setContentView(R.layout.activity_main);
        initView();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initView</span>() {
        <span class="hljs-comment">//创建SimpleDraweeView对象</span>
        simpleDraweeView = (SimpleDraweeView) findViewById(R.id.main_sdv);
        <span class="hljs-comment">//创建将要下载的图片的URI</span>
        Uri imageUri = Uri.parse(<span class="hljs-string">"http://my.csdn.net/uploads/avatar_y1scp.jpg"</span>);
        <span class="hljs-comment">//开始下载</span>
        simpleDraweeView.setImageURI(imageUri);
    }
}</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015102621124" alt="错误的网络图片地址" title=""></p>

<p>运行效果：</p>

<p><img src="http://img.blog.csdn.net/20151015103047747" alt="failure" title=""></p></li>
<li><h4 id="重试图retryimage">重试图—retryImage：</h4>

<p>在此之前我们需要一张正在加载图 <strong>icon_retry.png</strong> 大家右键另存为即可：</p>

<p><img src="http://img.blog.csdn.net/20151015105821944" alt="icon_retry" title=""></p>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"fitCenter"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        fresco:failureImage=<span class="hljs-string">"@mipmap/icon_failure"</span>
        fresco:failureImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:retryImage=<span class="hljs-string">"@mipmap/icon_retry"</span>
        fresco:retryImageScaleType=<span class="hljs-string">"centerCrop"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码分析：</p>

<p><img src="http://img.blog.csdn.net/20151015110122695" alt="重试图" title=""></p>

<p>修改我们的 <strong>MainActivity</strong> 里代码：</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AppCompatActivity</span> {</span>

    <span class="hljs-keyword">private</span> SimpleDraweeView simpleDraweeView;

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span>(Bundle savedInstanceState) {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        Fresco.initialize(<span class="hljs-keyword">this</span>);
        setContentView(R.layout.activity_main);
        initView();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initView</span>() {
        <span class="hljs-comment">//创建SimpleDraweeView对象</span>
        simpleDraweeView = (SimpleDraweeView) findViewById(R.id.main_sdv);
        <span class="hljs-comment">//创建将要下载的图片的URI</span>
        Uri imageUri = Uri.parse(<span class="hljs-string">"http://my.csdn.net/uploads/avatar_y1scp.jpg"</span>);
        <span class="hljs-comment">//开始下载</span>
        simpleDraweeView.setImageURI(imageUri);

        <span class="hljs-comment">//创建DraweeController</span>
        DraweeController controller = Fresco.newDraweeControllerBuilder()
                <span class="hljs-comment">//加载的图片URI地址</span>
                .setUri(imageUri)
                <span class="hljs-comment">//设置点击重试是否开启</span>
                .setTapToRetryEnabled(<span class="hljs-keyword">true</span>)
                <span class="hljs-comment">//设置旧的Controller</span>
                .setOldController(simpleDraweeView.getController())
                <span class="hljs-comment">//构建</span>
                .build();

        <span class="hljs-comment">//设置DraweeController</span>
        simpleDraweeView.setController(controller);
    }
}</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015112001177" alt="重试图片" title=""></p>

<p>运行效果：</p>

<p><img src="http://img.blog.csdn.net/20151015112222517" alt="重试图效果" title=""></p>

<p>注意：</p>

<p>重复加载4次还是没有加载出来的时候才会显示 <strong>failureImage(失败图)</strong> 的图片</p></li>
<li><h4 id="淡入淡出动画fadeduration">淡入淡出动画—fadeDuration：</h4>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"fitCenter"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        fresco:failureImage=<span class="hljs-string">"@mipmap/icon_failure"</span>
        fresco:failureImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:retryImage=<span class="hljs-string">"@mipmap/icon_retry"</span>
        fresco:retryImageScaleType=<span class="hljs-string">"centerCrop"</span>
        fresco:fadeDuration=<span class="hljs-string">"5000"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015113152652" alt="淡入淡出动画" title=""></p>

<p><strong>MainActivity</strong> 中的代码无需修改。</p>

<p>运行效果：</p>

<table>
<thead>
<tr>
  <th>重试+进度图+失败图</th>
  <th>进度图+正确图</th>
</tr>
</thead>
<tbody><tr>
  <td><img src="http://img.blog.csdn.net/20151015120140718" alt="淡入淡出动画" title=""></td>
  <td><img src="http://img.blog.csdn.net/20151015120721864" alt="正确图" title=""></td>
</tr>
</tbody></table>
</li>
<li><h4 id="背景图backgroundimage">背景图—backgroundImage：</h4>

<p>这里呢，我们的背景图采用的是一个系统所提供的颜色中的一种。</p>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:fadeDuration=<span class="hljs-string">"5000"</span>
        fresco:backgroundImage=<span class="hljs-string">"@android:color/holo_orange_light"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015140145519" alt="背景图" title=""></p>

<p><strong>MainActivity</strong> 中的代码无需修改，运行效果：</p>

<p><img src="http://img.blog.csdn.net/20151015140539080" alt="背景效果" title=""></p></li>
<li><h4 id="叠加图overlayimage">叠加图—overlayImage：</h4>

<p>这里呢，我们的背景图采用的是一个系统所提供的颜色中的一种。</p>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"fitCenter"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        fresco:failureImage=<span class="hljs-string">"@mipmap/icon_failure"</span>
        fresco:failureImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:retryImage=<span class="hljs-string">"@mipmap/icon_retry"</span>
        fresco:retryImageScaleType=<span class="hljs-string">"centerCrop"</span>
        fresco:fadeDuration=<span class="hljs-string">"5000"</span>
        fresco:backgroundImage=<span class="hljs-string">"@android:color/holo_orange_light"</span>
        fresco:pressedStateOverlayImage=<span class="hljs-string">"@android:color/holo_green_dark"</span>
        fresco:overlayImage=<span class="hljs-string">"@android:color/black"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015144954916" alt="叠加图" title=""></p>

<p><strong>MainActivity</strong> 中的代码无需修改。</p>

<p>运行效果：</p>

<p><img src="http://img.blog.csdn.net/20151015145345012" alt="叠加图" title=""></p>

<p>从运行效果来看，叠加图在最上面，覆盖了下面的图。</p></li>
<li><h4 id="圆形图roundascircle">圆形图—roundAsCircle：</h4>

<p>一行代码搞定圆形图：设置roundAsCircle为true；</p>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"fitCenter"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        fresco:failureImage=<span class="hljs-string">"@mipmap/icon_failure"</span>
        fresco:failureImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:retryImage=<span class="hljs-string">"@mipmap/icon_retry"</span>
        fresco:retryImageScaleType=<span class="hljs-string">"centerCrop"</span>
        fresco:fadeDuration=<span class="hljs-string">"5000"</span>
        fresco:backgroundImage=<span class="hljs-string">"@android:color/holo_orange_light"</span>
        fresco:roundAsCircle=<span class="hljs-string">"true"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015150259016" alt="圆形图" title=""></p>

<p><strong>MainActivity</strong> 中的代码无需修改。</p>

<p>运行效果：</p>

<p><img src="http://img.blog.csdn.net/20151015150548029" alt="circle" title=""></p>

<p>可以看到，从图片开始加载一直到图片下载完毕，整个图像都是圆形的。</p></li>
<li><h4 id="圆角图roundedcornerradius">圆角图—roundedCornerRadius：</h4>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"fitCenter"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        fresco:failureImage=<span class="hljs-string">"@mipmap/icon_failure"</span>
        fresco:failureImageScaleType=<span class="hljs-string">"centerInside"</span>
        fresco:retryImage=<span class="hljs-string">"@mipmap/icon_retry"</span>
        fresco:retryImageScaleType=<span class="hljs-string">"centerCrop"</span>
        fresco:fadeDuration=<span class="hljs-string">"5000"</span>
        fresco:backgroundImage=<span class="hljs-string">"@android:color/holo_orange_light"</span>
        fresco:roundedCornerRadius=<span class="hljs-string">"30dp"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015152240884" alt="圆角" title=""></p>

<p><strong>MainActivity</strong> 中的代码无需修改。</p>

<p>运行效果：</p>

<p><img src="http://img.blog.csdn.net/20151015152547725" alt="圆角运行图" title=""></p>

<p>可以看到，从图片开始加载一直到图片下载完毕，整个图像都是圆角的。</p>

<table>
<thead>
<tr>
  <th align="right">圆角属性</th>
  <th>圆角属性</th>
</tr>
</thead>
<tbody><tr>
  <td align="right">左上角是否为圆角<code>fresco:roundTopLeft="false"</code></td>
  <td>右上角是否为圆角<code>fresco:roundTopRight="false"</code></td>
</tr>
<tr>
  <td align="right"><img src="http://img.blog.csdn.net/20151015154403453" alt="topLeft" title=""></td>
  <td><img src="http://img.blog.csdn.net/20151015154233987" alt="topRight" title=""></td>
</tr>
<tr>
  <td align="right"><img src="http://img.blog.csdn.net/20151015154042619" alt="bottomLeft" title=""></td>
  <td><img src="http://img.blog.csdn.net/20151015154614844" alt="bottomRight" title=""></td>
</tr>
<tr>
  <td align="right">左下角是否为圆角<code>fresco:roundBottomLeft="false"</code></td>
  <td>右下角是否为圆角<code>fresco:roundBottomRight="false"</code></td>
</tr>
</tbody></table>


<p>注意：</p>

<p>当我们同时设置图像显示为圆形图像和圆角图像时，只会显示为圆形图像。</p>

<p><img src="http://img.blog.csdn.net/20151015160337036" alt="同时设置圆形圆角" title=""></p></li>
<li><h4 id="圆形圆角边框宽度及颜色roundingborder">圆形圆角边框宽度及颜色—roundingBorder：</h4>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        fresco:failureImage=<span class="hljs-string">"@mipmap/icon_failure"</span>
        fresco:failureImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:retryImage=<span class="hljs-string">"@mipmap/icon_retry"</span>
        fresco:retryImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:fadeDuration=<span class="hljs-string">"5000"</span>
        fresco:backgroundImage=<span class="hljs-string">"@android:color/holo_orange_light"</span>
        fresco:roundAsCircle=<span class="hljs-string">"true"</span>
        fresco:roundedCornerRadius=<span class="hljs-string">"30dp"</span>
        fresco:roundTopLeft=<span class="hljs-string">"true"</span>
        fresco:roundTopRight=<span class="hljs-string">"true"</span>
        fresco:roundBottomLeft=<span class="hljs-string">"true"</span>
        fresco:roundBottomRight=<span class="hljs-string">"true"</span>
        fresco:roundingBorderWidth=<span class="hljs-string">"10dp"</span>
        fresco:roundingBorderColor=<span class="hljs-string">"@android:color/black"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015163826688" alt="圆形圆角边框" title=""></p>

<p><strong>MainActivity</strong> 中的代码无需修改。</p>

<p>运行效果(左边显示的是带边框的圆形图像，右边显示的是带边框的圆角图像)：</p>

<p><img src="http://img.blog.csdn.net/20151015164047548" alt="圆形边框" title=""><img src="http://img.blog.csdn.net/20151015164235739" alt="圆角边框" title=""></p></li>
<li><h4 id="圆形或圆角图像底下的叠加颜色roundwithoverlaycolor">圆形或圆角图像底下的叠加颜色—roundWithOverlayColor：</h4>

<p>修改我们刚刚书写的 <strong>activity_main.xml</strong> ：</p>

<pre class="prettyprint"><code class=" hljs avrasm">&lt;RelativeLayout xmlns:android=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    xmlns:fresco=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>
    android:layout_width=<span class="hljs-string">"match_parent"</span>
    android:layout_height=<span class="hljs-string">"match_parent"</span>&gt;

    &lt;<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>
        android:id=<span class="hljs-string">"@+id/main_sdv"</span>
        android:layout_width=<span class="hljs-string">"100dp"</span>
        android:layout_height=<span class="hljs-string">"100dp"</span>
        android:layout_centerInParent=<span class="hljs-string">"true"</span>
        fresco:actualImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:placeholderImage=<span class="hljs-string">"@mipmap/icon_placeholder"</span>
        fresco:placeholderImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:progressBarImage=<span class="hljs-string">"@mipmap/icon_progress_bar"</span>
        fresco:progressBarImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:progressBarAutoRotateInterval=<span class="hljs-string">"5000"</span>
        fresco:failureImage=<span class="hljs-string">"@mipmap/icon_failure"</span>
        fresco:failureImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:retryImage=<span class="hljs-string">"@mipmap/icon_retry"</span>
        fresco:retryImageScaleType=<span class="hljs-string">"focusCrop"</span>
        fresco:fadeDuration=<span class="hljs-string">"5000"</span>
        fresco:backgroundImage=<span class="hljs-string">"@android:color/holo_orange_light"</span>
        fresco:roundWithOverlayColor=<span class="hljs-string">"@android:color/darker_gray"</span>
        fresco:roundAsCircle=<span class="hljs-string">"true"</span>
        &gt;&lt;/<span class="hljs-keyword">com</span><span class="hljs-preprocessor">.facebook</span><span class="hljs-preprocessor">.drawee</span><span class="hljs-preprocessor">.view</span><span class="hljs-preprocessor">.SimpleDraweeView</span>&gt;

&lt;/RelativeLayout&gt;</code></pre>

<p>代码说明：</p>

<p><img src="http://img.blog.csdn.net/20151015171058014" alt="底下的颜色" title=""></p>

<p><strong>MainActivity</strong> 中的代码无需修改。</p>

<p>运行效果(左边为圆形效果，右边为圆角效果)：</p>

<p><img src="http://img.blog.csdn.net/20151015171501178" alt="圆形效果" title=""><img src="http://img.blog.csdn.net/20151015171532536" alt="圆角效果" title=""></p></li>
<li><h4 id="缩放类型scaletype">缩放类型—ScaleType：</h4>

<table>
<thead>
<tr>
  <th>类型</th>
  <th>描述</th>
</tr>
</thead>
<tbody><tr>
  <td>center</td>
  <td>居中，无缩放</td>
</tr>
<tr>
  <td>centerCrop</td>
  <td>保持宽高比缩小或放大，使得两边都大于或等于显示边界。居中显示。</td>
</tr>
<tr>
  <td>focusCrop</td>
  <td>同centerCrop, 但居中点不是中点，而是指定的某个点</td>
</tr>
<tr>
  <td>centerInside</td>
  <td>使两边都在显示边界内，居中显示。如果图尺寸大于显示边界，则保持长宽比缩小图片。</td>
</tr>
<tr>
  <td>fitCenter</td>
  <td>保持宽高比，缩小或者放大，使得图片完全显示在显示边界内。居中显示</td>
</tr>
<tr>
  <td>fitStart</td>
  <td>同上。但不居中，和显示边界左上对齐</td>
</tr>
<tr>
  <td>fitEnd</td>
  <td>同fitCenter， 但不居中，和显示边界右下对齐</td>
</tr>
<tr>
  <td>fitXY</td>
  <td>不保存宽高比，填充满显示边界</td>
</tr>
<tr>
  <td>none</td>
  <td>如要使用tile mode显示, 需要设置为none</td>
</tr>
</tbody></table>


<p>推荐使用：focusCrop 类型</p>

<p>Fresco中文说明对这一点也有详情的说明： <a href="http://www.fresco-cn.org/docs/scaling.html#_" target="_blank" rel="external">缩放</a></p></li>
<li><h4 id="总结">总结：</h4>

<table>
<thead>
<tr>
  <th>XML属性</th>
  <th>意义</th>
</tr>
</thead>
<tbody><tr>
  <td>fadeDuration</td>
  <td>淡入淡出动画持续时间(单位：毫秒ms)</td>
</tr>
<tr>
  <td>actualImageScaleType</td>
  <td>实际图像的缩放类型</td>
</tr>
<tr>
  <td>placeholderImage</td>
  <td>占位图</td>
</tr>
<tr>
  <td>placeholderImageScaleType</td>
  <td>占位图的缩放类型</td>
</tr>
<tr>
  <td>progressBarImage</td>
  <td>进度图</td>
</tr>
<tr>
  <td>progressBarImageScaleType</td>
  <td>进度图的缩放类型</td>
</tr>
<tr>
  <td>progressBarAutoRotateInterval</td>
  <td>进度图自动旋转间隔时间(单位：毫秒ms)</td>
</tr>
<tr>
  <td>failureImage</td>
  <td>失败图</td>
</tr>
<tr>
  <td>failureImageScaleType</td>
  <td>失败图的缩放类型</td>
</tr>
<tr>
  <td>retryImage</td>
  <td>重试图</td>
</tr>
<tr>
  <td>retryImageScaleType</td>
  <td>重试图的缩放类型</td>
</tr>
<tr>
  <td>backgroundImage</td>
  <td>背景图</td>
</tr>
<tr>
  <td>overlayImage</td>
  <td>叠加图</td>
</tr>
<tr>
  <td>pressedStateOverlayImage</td>
  <td>按压状态下所显示的叠加图</td>
</tr>
<tr>
  <td>roundAsCircle</td>
  <td>设置为圆形图</td>
</tr>
<tr>
  <td>roundedCornerRadius</td>
  <td>圆角半径</td>
</tr>
<tr>
  <td>roundTopLeft</td>
  <td>左上角是否为圆角</td>
</tr>
<tr>
  <td>roundTopRight</td>
  <td>右上角是否为圆角</td>
</tr>
<tr>
  <td>roundBottomLeft</td>
  <td>左下角是否为圆角</td>
</tr>
<tr>
  <td>roundBottomRight</td>
  <td>右下角是否为圆角</td>
</tr>
<tr>
  <td>roundingBorderWidth</td>
  <td>圆形或者圆角图边框的宽度</td>
</tr>
<tr>
  <td>roundingBorderColor</td>
  <td>圆形或者圆角图边框的颜色</td>
</tr>
<tr>
  <td>roundWithOverlayColor</td>
  <td>圆形或者圆角图底下的叠加颜色(只能设置颜色)</td>
</tr>
<tr>
  <td>viewAspectRatio</td>
  <td>控件纵横比</td>
</tr>
</tbody></table>
</li>
<li><h4 id="github">GitHub：</h4>

<p>本教程最终项目GitHub地址：<a href="https://github.com/scp504677840/Fresco" target="_blank" rel="external">https://github.com/scp504677840/Fresco</a></p></li>
</ul></div>
        <script type="text/javascript">
            $(function () {
                $('pre.prettyprint code').each(function () {
                    var lines = $(this).text().split('\n').length;
                    var $numbering = $('<ul/>').addClass('pre-numbering').hide();
                    $(this).addClass('has-numbering').parent().append($numbering);
                    for (i = 1; i <= lines; i++) {
                        $numbering.append($('<li/>').text(i));
                    };
                    $numbering.fadeIn(1700);
                });
            });
        </script>

<p></p></div><p></p>
<!-- Baidu Button BEGIN -->
<div class="bdsharebuttonbox tracking-ad" style="float: right;" data-mod="popu_172"><br><a href="#" class="bds_more" data-cmd="more" style="background-position:0 0 !important; background-image: url(http://bdimg.share.baidu.com/static/api/img/share/icons_0_16.png?v=d754dcc0.png) !important"></a><br><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间" style="background-position:0 -52px !important"></a><br><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博" style="background-position:0 -104px !important"></a><br><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博" style="background-position:0 -260px !important"></a><br><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网" style="background-position:0 -208px !important"></a><br><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信" style="background-position:0 -1612px !important"></a><br></div><br><script>window._bd_share_config = { “common”: { “bdSnsKey”: {}, “bdText”: “”, “bdMini”: “1”, “bdMiniList”: false, “bdPic”: “”, “bdStyle”: “0”, “bdSize”: “16” }, “share”: {} }; with (document) 0[(getElementsByTagName(‘head’)[0] || body).appendChild(createElement(‘script’)).src = ‘<a href="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=">http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion=</a>‘ + ~(-new Date() / 36e5)];</script><br><!-- Baidu Button END --><br><br>   <link rel="stylesheet" href="http://static.blog.csdn.net/css/blog_detail.css"><br><br><br><!--172.16.140.12--><br><br><!-- Baidu Button BEGIN --><br><script type="text/javascript" id="bdshare_js" data="type=tools&amp;uid=1536434"></script><br><script type="text/javascript" id="bdshell_js"></script><br><script type="text/javascript"><br>    document.getElementById(“bdshell_js”).src = “<a href="http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=">http://bdimg.share.baidu.com/static/js/shell_v2.js?cdnversion=</a>“ + Math.ceil(new Date()/3600000)<br></script><br><!-- Baidu Button END --><br><br><br><br>        <div id="digg" articleid="49245535"><br>            <dl id="btnDigg" class="digg digg_disable"><br><br>                 <dt>顶</dt><br>                <dd>6</dd><br>            </dl><br>            <dl id="btnBury" class="digg digg_disable"><br><br>                  <dt>踩</dt><br>                <dd>0</dd><br>            </dl><br>        </div>

   <ul class="article_next_prev"><br>                <li class="prev_article"><span onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_shangyipian']);location.href='/y1scp/article/details/49095729';">上一篇</span><a href="/y1scp/article/details/49095729" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_shangyipian'])">Android中级篇之百度地图SDK v3.5.0-一步一步带你仿各大主流APP地图定位移动选址功能</a></li><br>                <li class="next_article"><span onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_xiayipian']);location.href='/y1scp/article/details/49593319';">下一篇</span><a href="/y1scp/article/details/49593319" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_xiayipian'])">Android图片加载神器之Fresco-更灵活的设置加载特效[Java代码实现XML效果]</a></li><br>    </ul>

<pre><code>&lt;div style=&quot;clear:both; height:10px;&quot;&gt;&lt;/div&gt;


    &lt;div class=&quot;similar_article&quot;  style=&quot;display:none&quot;&gt;
            &lt;h4&gt;我的同类文章&lt;/h4&gt;
            &lt;div class=&quot;similar_c&quot;style=&quot;margin:20px 0px 0px 0px&quot;&gt;
                &lt;div class=&quot;similar_c_t&quot;&gt;
                            &lt;label class=&quot;similar_cur&quot;&gt;
                                &lt;span  style=&quot;cursor:pointer&quot;  onclick=&quot;GetCategoryArticles(&apos;3142345&apos;,&apos;y1scp&apos;,&apos;foot&apos;,&apos;49245535&apos;);&quot;&gt;Android中级篇&lt;em&gt;（12）&lt;/em&gt;&lt;/span&gt;
                            &lt;/label&gt;
                &lt;/div&gt;

                &lt;div class=&quot;similar_wrap tracking-ad&quot; data-mod=&quot;popu_141&quot;  style=&quot;max-height:195px;&quot;&gt;
                    &lt;a href=&quot;http://blog.csdn.net&quot; style=&quot;display:none&quot;&gt;http://blog.csdn.net&lt;/a&gt;
                    &lt;ul class=&quot;similar_list fl&quot;&gt;                          
                    &lt;/ul&gt;

                    &lt;ul class=&quot;similar_list fr&quot;&gt;                           
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;    
&lt;script  type=&quot;text/javascript&quot;&gt;
    $(function () {
        GetCategoryArticles(&apos;3142345&apos;, &apos;y1scp&apos;,&apos;foot&apos;,&apos;49245535&apos;);
    });
&lt;/script&gt;
</code></pre><p></p></div><p></p>
<div id="suggest"></div><br>         <script language="javascript" type="text/javascript"><br>             $(function(){<br>                 $.get(“/y1scp/svc/GetSuggestContent/49245535”,function(data){<br>                     $(“#suggest”).html(data);<br>                 });<br>             });<br>         </script><br><br><br><style><br>.blog-ass-articl dd {<br>color: #369;<br>width: 99%; /<em>修改行</em>/<br>float: left;<br>overflow: hidden;<br>font: normal normal 12px/23px “SimSun”;<br>height: 23px;<br>margin: 0;<br>padding: 0 0 0 10px;<br>margin-right: 30px;<br>background: url(<a href="http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif">http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif</a>) no-repeat 0 10px;<br>}<br></style><br><br><dl class="blog-ass-articl" id="res-relatived"><br>    <div class="embody embody_b" id="libkeyparent" style="display:none"><br>            <span class="embody_t">更多资料请参考：</span><br>            <div class="embody_c" id="libkey"></div><br>    </div>


<pre><code> &lt;dt&gt;&lt;span&gt;猜你在找&lt;/span&gt;&lt;/dt&gt;    





&lt;div id=&quot;adCollege&quot; style=&quot;width: 42%;float: left;&quot;&gt; 
    &lt;script src=&quot;http://csdnimg.cn/jobreco/job_reco.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt; 
    &lt;script type=&quot;text/javascript&quot;&gt;
        csdn.position.showEdu({
            sourceType: &quot;blog&quot;,
            searchType: &quot;detail&quot;,
            searchKey: &quot;49245535&quot;,
            username: &quot;&quot;,
            recordcount: &quot;5&quot;,
            containerId: &quot;adCollege&quot; //容器DIV的id。 
        });
    &lt;/script&gt; 
&lt;/div&gt;  


 &lt;div id=&quot;res&quot;  data-mod=&quot;popu_36&quot;  class=&quot;tracking-ad&quot; style=&quot;width: 42%;float: left;margin-right: 30px;&quot;&gt;&lt;/div&gt;
</code></pre><p></p></dl><p></p>
<script type="text/javascript">
    $(function () {
        setTimeout(function () {
            var searchtitletags = 'Android图片加载神器之Fresco-加载图片基础[详细图解Fresco的使用]' + ',' + $("#tags").html();
            searchService({
                index: 'blog',
                query: searchtitletags,
                from: 5,
                size: 5,
                appendTo: '#res',
                url: 'recommend',
                his: 2,
                client: "blog_cf_enhance",
                tmpl: '<dd style="background:url(http://static.blog.csdn.net/skin/default/images/blog-dot-red3.gif) no-repeat 0 10px;"><a href="#{ url }" title="#{ title }" strategy="#{ strategy }">#{ title }</a></dd>'
            });
        }, 500);
    });    

 </script>  

<pre><code>&lt;div id=&quot;ad_cen&quot;&gt;        
</code></pre><!--AdForward Begin:-->
<script type="text/javascript" src="http://csdnim.qtmojo.com/main/s?user=csdn|blog|banner2&db=csdnim&border=0&local=yes&js=ie" charset="gbk"></script>
<!--AdForward End-->      

<div class="comment_class">
    <div id="comment_title" class="panel_head">
        <span class="see_comment">查看评论</span><a name="comments"></a></div>
    <div id="comment_list">
    </div>
    <div id="comment_bar">
    </div>
    <div id="comment_form">
    </div>
    <div class="announce">
        * 以上用户言论只代表其个人观点，不代表CSDN网站的观点或立场<a name="reply"></a><a name="quote"></a></div>
</div>

<script type="text/javascript">
    var fileName = '49245535';
    var commentscount = 15;
    var islock = false
</script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/comment.js"></script>
    <div id="ad_bot">
    </div>
<div id="report_dialog">
</div>

<div id="d-top" style="bottom:60px;">
        <a id="quick-reply" class="btn btn-top q-reply" title="快速回复" style="display:none;">
            <img src="http://static.blog.csdn.net/images/blog-icon-reply.png" alt="快速回复">
        </a>    

    <a id="d-top-a" class="btn btn-top backtop" style="display: none;" title="返回顶部" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_huidaodingbu'])">         
         <img src="http://static.blog.csdn.net/images/top.png" alt="TOP">
    </a>
</div>
<script type="text/javascript">
    $(function ()
    {
        $("#ad_frm_0").height("90px");

        setTimeout(function(){
            $("#ad_frm_2").height("200px");
        },1000);    
    });

</script>
<style type="text/css">
    .tag_list
    {
        background: none repeat scroll 0 0 #FFFFFF;
        border: 1px solid #D7CBC1;
        color: #000000;
        font-size: 12px;
        line-height: 20px;
        list-style: none outside none;
        margin: 10px 2% 0 1%;
        padding: 1px;
    }
    .tag_list h5
    {
        background: none repeat scroll 0 0 #E0DBD3;
        color: #47381C;
        font-size: 12px;
        height: 24px;
        line-height: 24px;
        padding: 0 5px;
        margin: 0;
    }
    .tag_list h5 a
    {
        color: #47381C;
    }
    .classify
    {
        margin: 10px 0;
        padding: 4px 12px 8px;
    }
    .classify a
    {
        margin-right: 20px;
        white-space: nowrap;
    }
</style>


<div class="tag_list" style="display:none"></div>
  <script language="javascript" type="text/javascript">     
      $(function(){
              setTimeout(function(){
                  $.get("/y1scp/svc/GetTagContent",function(data){
                      $(".tag_list").html(data).show();
                  });     
              });
          },500);                       
 </script> 


<div id="pop_win" style="display:none ;position: absolute; z-index: 10000; border: 1px solid rgb(220, 220, 220); top: 222.5px; left: 630px; opacity: 1; background: none 0px 0px repeat scroll rgb(255, 255, 255);"><br><br></div><br><div id="popup_mask"></div><br><style><br>    #popup_mask<br>    {<br>        position: absolute;<br>        width: 100%;<br>        height: 100%;<br>        background: #000;<br>        z-index: 9999;<br>        left: 0px;<br>        top: 0px;<br>        opacity: 0.3;<br>        filter: alpha(opacity=30);<br>        display: none;<br>    }<br><br></style><br><br><br><br><br><script type="text/javascript"><br>    $(function(){<br>        setTimeout(function(){<br>            $(“.comment_body:contains(‘回复’)”).each(function(index,item){<br>                var u=$(this).text().split(‘：’)[0].toString().replace(“回复”,””)<br>                var thisComment=$(this);<br>                if(u)<br>                {<br>                    $.getJSON(“<a href="https://passport.csdn.net/get/nick?callback=?">https://passport.csdn.net/get/nick?callback=?</a>“, {users: u}, function(a) {<br>                        if(a!=null&amp;&amp;a.data!=null&amp;&amp;a.data.length&gt;0)<br>                        {<br>                            nick=a.data[0].n;<br>                            if(u!=nick)<br>                            {<br>                                thisComment.text(thisComment.text().replace(u,nick));<br>                            }<br>                        }<br>                    });<br>                }<br>            });<br>        },200);<br><br>        setTimeout(function(){<br>            $(“a img[src=’<a href="http://js.tongji.linezing.com/stats.gif&#39;]&quot;).parent().css({&quot;position&quot;:&quot;absolute&quot;,&quot;left&quot;:&quot;50%&quot;}">http://js.tongji.linezing.com/stats.gif&#39;]&quot;).parent().css({&quot;position&quot;:&quot;absolute&quot;,&quot;left&quot;:&quot;50%&quot;}</a>);<br>        },300);<br>    });<br><br>    function loginbox(){<br>        var $logpop=$(“#pop_win”);<br>        $logpop.html(‘<iframe src="https://passport.csdn.net/account/loginbox?service=http://static.blog.csdn.net/callback.htm" frameborder="0" height="600" width="400" scrolling="no"></iframe>‘);<br><br>        $(‘#popup_mask’).css({<br>            opacity: 0.5,<br>            width: $( document ).width() + ‘px’,<br>            height:  $( document ).height() + ‘px’<br>        });<br>        $(‘#popup_mask’).css(“display”,”block”);<br><br>        $logpop.css( {<br>            top: ($( window ).height() - $logpop.height())/ 2  + $( window<br>       ).scrollTop() + ‘px’,<br>            left:($( window ).width() - $logpop.width())/ 2<br>        } );<br><br>        setTimeout( function () {<br>            $logpop.show();<br>            $logpop.css( {<br>                opacity: 1<br>            } );<br>        }, 200 );<br><br>        $(‘#popup_mask’).unbind(“click”);<br>        $(‘#popup_mask’).bind(“click”, function(){<br>            $(‘#popup_mask’).hide();<br>            var $clopop = $(“#pop_win”);<br>            $(“#common_ask_div_sc”).css(“display”,”none”);<br>            $clopop.css( {<br>                opacity: 0<br>            } );<br>            setTimeout( function () {<br>                $clopop.hide();<br>            }, 350 );<br>            return false;<br>        });<br>    }<br><br></script><br><br><br>                        <div class="clear"><br>                        </div><br>                                       

<pre><code>        &lt;/div&gt;

       &lt;div id=&quot;side&quot;&gt;
&lt;div class=&quot;side&quot;&gt;
</code></pre><div id="panel_Profile" class="panel"><br><ul class="panel_head"><span>个人资料</span></ul><br><ul class="panel_body profile"><br><div id="blog_userface"><br>    <a href="http://my.csdn.net/y1scp" target="_blank"><br>    <img src="http://avatar.csdn.net/4/E/8/1_y1scp.jpg" title="访问我的空间" style="max-width:90%"><br>    </a><br>    <br><br>    <span><a href="http://my.csdn.net/y1scp" class="user_name" target="_blank">y1scp</a></span><br></div><br><div class="interact"><br><br>    <a href="javascript:void(0);" class="attent" id="span_add_follow" title="[加关注]" target="_blank" rel="external"></a><br><br> <a href="javascript:void(0);" class="letter" title="[发私信]" onclick="window.open('http://msg.csdn.net/letters/model?receiver=y1scp','_blank','height=350,width=700');_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_sixin'])" target="_blank" rel="external"></a><br></div><br><div id="blog_medal"><br>                <div id="bms_box"><br>                                            <a target="_blank"><br>                                                    <img src="http://c.csdnimg.cn/jifen/images/xunzhang/xunzhang/zhuanlandaren.png" onmouseover="m_over_m(this,2)" onmouseout="m_out_m()" alt="1"><br>                                            </a><br>               </div><br></div><br><ul id="blog_rank"><br>    <li>访问：<span>18337次</span></li><br>    <li>积分：<span>464</span> </li><br>    <li>等级： <span style="position:relative;display:inline-block;z-index:1"><br>            <img src="http://c.csdnimg.cn/jifen/images/xunzhang/jianzhang/blog2.png" alt="" style="vertical-align: middle;" id="leveImg"><br>            <div id="smallTittle" style=" position: absolute;  left: -24px;  top: 25px;  text-align: center;  width: 101px;  height: 32px;  background-color: #fff;  line-height: 32px;  border: 2px #DDDDDD solid;  box-shadow: 0px 2px 2px rgba (0,0,0,0.1);  display: none;   z-index: 999;"><br>            <div style="left: 42%;  top: -8px;  position: absolute;  width: 0;  height: 0;  border-left: 10px solid transparent;  border-right: 10px solid transparent;  border-bottom: 8px solid #EAEAEA;"></div><br>            积分：464 </div><br>        </span>  </li><br>    <li>排名：<span>千里之外</span></li><br></ul><br><ul id="blog_statistics"><br>    <li>原创：<span>16篇</span></li><br>    <li>转载：<span>0篇</span></li><br>    <li>译文：<span>0篇</span></li><br>    <li>评论：<span>38条</span></li><br></ul><br></ul><br></div>


<div class="panel" id="panel_Search"><br>    <ul class="panel_head"><span>文章搜索</span></ul><br>    <ul class="panel_body"><br>        <form id="frmSearch" action="http://so.csdn.net/search" class="form_search" target="_blank"><br>        <span><input id="inputSearch" type="text" class="blogsearch" title="请输入关键字"></span><br>        <input id="btnSubmit" type="button" value="搜索" title="search in blog"><br>        <input type="hidden" name="q" id="inputQ"><br>        <input type="hidden" name="t" value="blog"><br>        <a id="btnSearchBlog" target="_blank"></a><br>        </form><br>    </ul><br></div>

<script type="text/javascript">
    $(function () {
        $("#btnSubmit").click(function () {           
            search();
        });

        $("#frmSearch").submit(function () {
            search();
            return false;
        });

        function search()
        {
            var url = "http://so.csdn.net/so/search/s.do?q=" + encodeURIComponent($("#inputSearch").val()) + "&u=" + username + "&t=blog";
            window.location.href = url;
        }   
    });
</script><div id="panel_Category" class="panel">
    <ul class="panel_head"><span>博客专栏</span></ul>
    <ul class="panel_body" id="sp_column">
    <table cellpadding="0" cellspacing="0"><tr>
    <td style="padding:10px 10px 0 0;">
    <a href="http://blog.csdn.net/column/details/baidumap.html" target="_blank"><img src="http://img.blog.csdn.net/20151123180444989" style="width:75px;height:75px;"></a>
    </td>
    <td style="padding:10px 0; vertical-align:top;">
    <a href="http://blog.csdn.net/column/details/baidumap.html" target="_blank">玩转百度地图</a>
    <p>文章：7篇</p>
    <span>阅读：9186</span>
    </td>
    </tr></table>
    </ul>
</div><div id="panel_Category" class="panel">
<ul class="panel_head"><span>文章分类</span></ul>
<ul class="panel_body">    
                 <li>
                    <a href="/y1scp/article/category/3142345" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_wenzhangfenlei']); ">Android中级篇</a><span>(13)</span>
                </li>
                 <li>
                    <a href="/y1scp/article/category/5759133" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_wenzhangfenlei']); ">Android初级篇</a><span>(1)</span>
                </li>
                 <li>
                    <a href="/y1scp/article/category/5763317" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_wenzhangfenlei']); ">Android工具篇</a><span>(1)</span>
                </li>
                 <li>
                    <a href="/y1scp/article/category/3278889" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_wenzhangfenlei']); ">SSH</a><span>(1)</span>
                </li>
                 <li>
                    <a href="/y1scp/article/category/5880841" onclick="_gaq.push(['_trackEvent','function', 'onclick', 'blog_articles_wenzhangfenlei']); ">Android高级篇</a><span>(0)</span>
                </li>
</ul>
</div><div id="panel_Archive" class="panel">
<ul class="panel_head"><span>文章存档</span></ul>
<ul class="panel_body">
<div id="archive_list">
<!--归档统计-->
<li><a href="/y1scp/article/month/2015/11">2015年11月</a><span>(2)</span></li><li><a href="/y1scp/article/month/2015/10">2015年10月</a><span>(2)</span></li><li><a href="/y1scp/article/month/2015/09">2015年09月</a><span>(2)</span></li><li><a href="/y1scp/article/month/2015/08">2015年08月</a><span>(7)</span></li><li><a href="/y1scp/article/month/2015/05">2015年05月</a><span>(2)</span></li><li><a href="/y1scp/article/month/2015/04">2015年04月</a><span>(1)</span></li>
</div>
</ul>
</div>
<div id="hotarticls" class="panel">
<ul class="panel_head">
    <span>       
阅读排行    </span>
</ul>

<ul class="panel_body itemlist">
<li>
<a href="/y1scp/article/details/49095729" title="Android中级篇之百度地图SDK v3.5.0-一步一步带你仿各大主流APP地图定位移动选址功能">Android中级篇之百度地图SDK v3.5.0-一步一步带你仿各大主流APP地图定位移动选址功能</a><span>(6160)</span>
</li>
<li>
<a href="/y1scp/article/details/49245535" title="Android图片加载神器之Fresco-加载图片基础[详细图解Fresco的使用]">Android图片加载神器之Fresco-加载图片基础[详细图解Fresco的使用]</a><span>(6002)</span>
</li>
<li>
<a href="/y1scp/article/details/49734429" title="Android图片加载神器之Fresco-圆形圆角二合一教程[Java代码实现圆形圆角效果]">Android图片加载神器之Fresco-圆形圆角二合一教程[Java代码实现圆形圆角效果]</a><span>(970)</span>
</li>
<li>
<a href="/y1scp/article/details/48023947" title="Android中级篇之百度地图SDK v3.5.0-配置环境及发布[图解AndroidStudio下配置.so文件]">Android中级篇之百度地图SDK v3.5.0-配置环境及发布[图解AndroidStudio下配置.so文件]</a><span>(877)</span>
</li>
<li>
<a href="/y1scp/article/details/49593319" title="Android图片加载神器之Fresco-更灵活的设置加载特效[Java代码实现XML效果]">Android图片加载神器之Fresco-更灵活的设置加载特效[Java代码实现XML效果]</a><span>(627)</span>
</li>
<li>
<a href="/y1scp/article/details/48000761" title="Android中级篇之百度地图SDK v3.5.0-申请密钥详解[AndroidStudio下获取SHA1]">Android中级篇之百度地图SDK v3.5.0-申请密钥详解[AndroidStudio下获取SHA1]</a><span>(578)</span>
</li>
<li>
<a href="/y1scp/article/details/48154185" title="Android中级篇之百度地图SDK v3.5.0-FragmentMap地图框架[图解SupportMapFragment类]">Android中级篇之百度地图SDK v3.5.0-FragmentMap地图框架[图解SupportMapFragment类]</a><span>(538)</span>
</li>
<li>
<a href="/y1scp/article/details/48173957" title="Android中级篇之百度地图SDK v3.5.0-百度地图定位[超详细图解定位基础]">Android中级篇之百度地图SDK v3.5.0-百度地图定位[超详细图解定位基础]</a><span>(443)</span>
</li>
<li>
<a href="/y1scp/article/details/45267921" title="Android中级篇之基于百度地图Android SDK v3.4.0开发实现定位">Android中级篇之基于百度地图Android SDK v3.4.0开发实现定位</a><span>(416)</span>
</li>
<li>
<a href="/y1scp/article/details/47785209" title="Android中级开发之Material Design-CardView初探">Android中级开发之Material Design-CardView初探</a><span>(323)</span>
</li>
</ul>
</div>
    
    <div class="clear">
    </div>
    
            <div class="clear">
            </div>
        


<script type="text/javascript" src="http://c.csdnimg.cn/rabbit/cnick/cnick.js"></script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/newblog.min.js"></script>


<script type="text/javascript" src="http://medal.blog.csdn.net/showblogmedal.ashx?blogid=5015007"></script>
<script type="text/javascript" src="http://static.blog.csdn.net/scripts/JavaScript1.js"></script>

<pre><code>&lt;script type=&quot;text/javascript&quot; src=&quot;http://passport.csdn.net/content/loginbox/login.js&quot;&gt;&lt;/script&gt;
</code></pre><script type="text/javascript">document.write("<img src=http://counter.csdn.net/pv.aspx?id=24 border=0 width=0 height=0>");</script>
<script type="text/javascript" src="http://www.csdn.net/ui/scripts/Csdn/counter.js"></script>
<script type="text/javascript" src="http://ad.csdn.net/scripts/ad-blog.js"></script>
<script type="text/javascript">
    $(function () {
        function __get_code_toolbar(snippet_id) {
            return $("<span class='tracking-ad' data-mod='popu_167'><a href='https://code.csdn.net/snippets/"
                    + snippet_id
                    + "' target='_blank' title='在CODE上查看代码片'  style='text-indent:0;'><img src='https://code.csdn.net/assets/CODE_ico.png' width=12 height=12 alt='在CODE上查看代码片' style='position:relative;top:1px;left:2px;'/></a></span>"
                    + "<span class='tracking-ad' data-mod='popu_170'><a href='https://code.csdn.net/snippets/"
                    + snippet_id
                    + "/fork' target='_blank' title='派生到我的代码片' style='text-indent:0;'><img src='https://code.csdn.net/assets/ico_fork.svg' width=12 height=12 alt='派生到我的代码片' style='position:relative;top:2px;left:2px;'/></a></span>");
        }

        $("[code_snippet_id]").each(function () {
            __s_id = $(this).attr("code_snippet_id");
            if (__s_id != null && __s_id != "" && __s_id != 0 && parseInt(__s_id) > 70020) {
                __code_tool = __get_code_toolbar(__s_id);
                $(this).prev().find(".tools").append(__code_tool);
            }
        });

        $(".bar").show();
    });
</script>




<pre><code>&lt;/div&gt;
  &lt;!--new top--&gt;

&lt;script id=&quot;csdn-toolbar-id&quot; btnId=&quot;header_notice_num&quot; wrapId=&quot;note1&quot; count=&quot;5&quot; subCount=&quot;5&quot; type=&quot;text/javascript&quot; src=&quot;http://c.csdnimg.cn/public/common/toolbar/js/toolbar.js&quot;&gt;&lt;/script&gt;
 &lt;!--new top--&gt;

&lt;link href=&quot;http://c.csdnimg.cn/comm_ask/css/ask_float_block.css&quot; type=&quot;text/css&quot; rel=&quot;stylesheet&quot; /&gt;
&lt;script language=&apos;JavaScript&apos; type=&apos;text/javascript&apos; src=&apos;http://c.csdnimg.cn/comm_ask/js/libs/wmd.js&apos;&gt;&lt;/script&gt;
&lt;script language=&apos;JavaScript&apos; type=&apos;text/javascript&apos; src=&apos;http://c.csdnimg.cn/comm_ask/js/libs/showdown.js&apos;&gt;&lt;/script&gt;
&lt;script language=&apos;JavaScript&apos; type=&apos;text/javascript&apos; src=&apos;http://c.csdnimg.cn/comm_ask/js/libs/prettify.js&apos;&gt;&lt;/script&gt;
&lt;script language=&apos;JavaScript&apos; type=&apos;text/javascript&apos; src=&apos;http://c.csdnimg.cn/comm_ask/js/apps/ask_float_block.js&apos;&gt;&lt;/script&gt;
</code></pre><p><br>   </p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
        
        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-03-02T15:52:40.000Z"><a href="/2016/03/02/使用GithubPages-Hexo搭建免费博客（三）/">2016-03-02</a></time>
      
      
  
    <h1 class="title"><a href="/2016/03/02/使用GithubPages-Hexo搭建免费博客（三）/">使用GithubPages-Hexo搭建免费博客（三）</a></h1>
  

    </header>
    <div class="entry">
      
        <h2 id="域名绑定"><a href="#域名绑定" class="headerlink" title="域名绑定"></a>域名绑定</h2><ul>
<li>域名解析<br>域名购买成功后，在解析设置中添加以下解析</li>
</ul>
<p><img src="http://7xr7f9.com1.z0.glb.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-03-03%20%E4%B8%8A%E5%8D%8812.02.04.png" alt=""></p>
<p>记录类型为：A<br>主机记录分别为“@”，“wwww”。其中设置@，可以用xxx.com进行访问。设置www，可以使用www.xxx.com进行访问。<br>记录值都为 “192.30.252.153”</p>
<ul>
<li>添加CNAME文件</li>
</ul>
<p>打开自己本地的博客目录，在source文件夹下创建名为CNAME的文本文件。打开，输入自己的域名，格式为“xxx.com”，保存后使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure>
<p>部署到github。</p>
<p>至此，便可使用我们自己的域名进行访问了！</p>
<h2 id="图片存储"><a href="#图片存储" class="headerlink" title="图片存储"></a>图片存储</h2><p>可以使用<a href="https://portal.qiniu.com/" target="_blank" rel="external">七牛云存储</a></p>
<h2 id="Mac上好用的GIF图截屏工具"><a href="#Mac上好用的GIF图截屏工具" class="headerlink" title="Mac上好用的GIF图截屏工具"></a><a href="http://www.cockos.com/licecap/" target="_blank" rel="external">Mac上好用的GIF图截屏工具</a></h2>
      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/博客/">博客</a>, <a href="/tags/Hexo/">Hexo</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-02-26T08:37:14.000Z"><a href="/2016/02/26/使用GithubPages-Hexo搭建免费博客（二）/">2016-02-26</a></time>
      
      
  
    <h1 class="title"><a href="/2016/02/26/使用GithubPages-Hexo搭建免费博客（二）/">使用GithubPages-Hexo搭建免费博客（二）</a></h1>
  

    </header>
    <div class="entry">
      
        <p><img src="http://7xr7f9.com1.z0.glb.clouddn.com/hexoThemes.png" alt="Hexo主题"></p>
<p>上篇讲到Hexo的安装，本篇继续，先来说说Hexo安装后的文件结构与功能。</p>
<h2 id="HEXO博客配置"><a href="#HEXO博客配置" class="headerlink" title="HEXO博客配置"></a>HEXO博客配置</h2><h4 id="1-Hexo设置"><a href="#1-Hexo设置" class="headerlink" title="1. Hexo设置"></a>1. Hexo设置</h4><p>打开根目录下的_config.yml文件</p>
<h5 id="1-1-站点配置"><a href="#1-1-站点配置" class="headerlink" title="1.1 站点配置"></a>1.1 站点配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1 # Site</span><br><span class="line">2 title: myblog   # 网站标题</span><br><span class="line">3 subtitle:      # 网站子标题</span><br><span class="line">4 description: 这是一个利用Hexo搭建的博客    # 网站描述</span><br><span class="line">5 author:  author   # 网站作者，也就是您的名字</span><br><span class="line">6 language: zh-cn   # 网站使用的语言        </span><br><span class="line">7 timezone:         # 网站时区。Hexo 预设使用您电脑的时区。</span><br></pre></td></tr></table></figure>
<h5 id="1-2-网址配置"><a href="#1-2-网址配置" class="headerlink" title="1.2 网址配置"></a>1.2 网址配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1 # URL</span><br><span class="line">2 url: http://xiaoxuetu.github.io         # 博客网址</span><br><span class="line">3 root: /                                 # 网站根目录</span><br><span class="line">4 permalink: :year/:month/:day/:title/    # 文章的永久链接格式   :year/:month/:day/:title/</span><br><span class="line">5 permalink_defaults:                     # 永久链接中各部分的默认值</span><br></pre></td></tr></table></figure>
<p><em>注意！ 如果你的网站存放在子目录中，例如 <a href="http://xiaoxuetu.github.io/blog" target="_blank" rel="external">http://xiaoxuetu.github.io/blog</a>, 则将url设为<a href="http://xiaoxuetu.github.io/blog，" target="_blank" rel="external">http://xiaoxuetu.github.io/blog，</a> 并且把 root 设为/blog/。</em></p>
<h5 id="1-3-目录配置"><a href="#1-3-目录配置" class="headerlink" title="1.3 目录配置"></a>1.3 目录配置</h5><p>一般直接取默认值不用修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1 # Directory</span><br><span class="line">2 source_dir: source         # 资源文件夹，这个文件夹用来存放内容，例如我们用markdown编写的博文</span><br><span class="line">3 public_dir: public         # 公共文件夹，这个文件夹用于存放生成的静态博客文件。</span><br><span class="line">4 tag_dir: tags              # 标签文件夹</span><br><span class="line">5 archive_dir: archives      # 归档文件夹</span><br><span class="line">6 category_dir: categories   # 分类文件夹</span><br><span class="line">7 code_dir: downloads/code   # Include code 文件夹</span><br><span class="line">8 i18n_dir: :lang            # 国际化（i18n）文件夹</span><br><span class="line">9 skip_render:               # 跳过指定文件的渲染，您可使用 glob 来配置路径。</span><br></pre></td></tr></table></figure>
<h5 id="1-4-文章配置"><a href="#1-4-文章配置" class="headerlink" title="1.4 文章配置"></a>1.4 文章配置</h5><p>一般直接取默认值不用修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1 # Writing</span><br><span class="line"> 2 new_post_name: :title.md    # 新文章的文件名称</span><br><span class="line"> 3 default_layout: post        # 预设布局</span><br><span class="line"> 4 titlecase: false            # 把标题转换为 titlecase（titlecase指的是将每个单词首字母转换成大写）</span><br><span class="line"> 5 external_link: true         # 在新标签中打开链接</span><br><span class="line"> 6 filename_case: 0            # 把文件名称转换为 (1) 小写或 (2) 大写, 0表示不变</span><br><span class="line"> 7 render_drafts: false        # 显示草稿</span><br><span class="line"> 8 post_asset_folder: false    # 启动 Asset 文件夹</span><br><span class="line"> 9 relative_link: false        # 把链接改为与根目录的相对位址</span><br><span class="line">10 future: true                # 显示未来的文章</span><br><span class="line">11 highlight:                  # 代码块的设置</span><br><span class="line">12   enable: true              </span><br><span class="line">13   line_number: true         # 是否显示行号</span><br><span class="line">14   auto_detect: true         # 是否自动监测</span><br><span class="line">15   tab_replace:              # 将 tab 替换成其他字符串</span><br></pre></td></tr></table></figure>
<h5 id="1-5-分类和标签配置"><a href="#1-5-分类和标签配置" class="headerlink" title="1.5 分类和标签配置"></a>1.5 分类和标签配置</h5><p>一般直接取默认值不用修改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1 # Category &amp; Tag</span><br><span class="line">2 default_category: uncategorized    # 默认分类, uncategorized表示未分类</span><br><span class="line">3 category_map:                      # 分类别名</span><br><span class="line">4 tag_map:                           # 标签别名</span><br></pre></td></tr></table></figure>
<h5 id="1-6-日期-以及-时间格式-配置"><a href="#1-6-日期-以及-时间格式-配置" class="headerlink" title="1.6 日期 以及 时间格式 配置"></a>1.6 日期 以及 时间格式 配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 date_format: YYYY-MM-DD           # 日期格式</span><br><span class="line">2 time_format: HH:mm:ss             # 时间格式</span><br></pre></td></tr></table></figure>
<h5 id="1-7-分页配置"><a href="#1-7-分页配置" class="headerlink" title="1.7 分页配置"></a>1.7 分页配置</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 # Pagination</span><br><span class="line">2 per_page: 10                      # 每页显示的文章量，如果设置值为0，则表示禁止分野</span><br><span class="line">3 pagination_dir: page              # 分页目录</span><br></pre></td></tr></table></figure>
<h5 id="1-8-主题配置"><a href="#1-8-主题配置" class="headerlink" title="1.8 主题配置"></a>1.8 主题配置</h5><p>从这里开始，都是属于Hexo拓展插件的配置了。以下代码，主要是主题配置。更详细的主题替换，看第二节</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 # Extensions</span><br><span class="line">2 theme: landscape    # 主题设置，默认是 landscape</span><br></pre></td></tr></table></figure>
<h5 id="1-9-部署配置"><a href="#1-9-部署配置" class="headerlink" title="1.9 部署配置"></a>1.9 部署配置</h5><p>这里主要用于将博客部署到github上，详细教程在后面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1 # Deployment</span><br><span class="line">2 deploy:</span><br><span class="line">3   type:     # 设置发布类型，如git，rsync</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="主题设置"><a href="#主题设置" class="headerlink" title="主题设置"></a>主题设置</h4><p>Hexo为我们提供了很多的主题供我们选择，网页在<a href="http://hexo.io/themes/" target="_blank" rel="external">这里</a> 我们可以自由选择自己喜欢的主题来进行设置。</p>
<p><a href="https://github.com/hexojs/hexo/wiki/Themes" target="_blank" rel="external">github主题列表地址</a></p>
<p>修改方法，就是将相应的主题clone到博客文件夹下的themes文件夹下，然后将上面1.8中的主题名字设置为相应的修改的名字。<br>我用的是这个：<a href="https://github.com/ppoffice/hexo-theme-hueman" target="_blank" rel="external">hexo-theme-hueman</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line">## Themes: https://hexo.io/themes/</span><br><span class="line">theme: hexo-theme-hueman</span><br></pre></td></tr></table></figure>
<p>想要看到修改后的效果，可以在终端中继续执行以下命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean    </span><br><span class="line">hexo generate</span><br></pre></td></tr></table></figure>
<p>以上命令完成后，可以执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>
<blockquote>
<p>hexo s 等同于 hexo server , s 其实就是 server的缩写</p>
</blockquote>
<p>执行成功后，控制台将会输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO  Hexo is running at http://0.0.0.0:4000/. Press Ctrl+C to stop.</span><br></pre></td></tr></table></figure>
<p>用浏览器打开此站点，就可以看到我们用Hexo生成的网页。</p>
<h5 id="新建博文"><a href="#新建博文" class="headerlink" title="新建博文"></a>新建博文</h5><p>cd到博客文件的根目录下，使用以下命令，新建博客</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new &quot;title&quot;</span><br></pre></td></tr></table></figure>
<p>格式是： hexo new ｛文章名｝<br>命令执行成功后，你就会发现在 source/_posts 目录下多了一个文件 title.md 。</p>
<p>在文件夹下使用之前我们下载的markdown编辑器，打开这个文件，会看到以下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: title</span><br><span class="line">date: </span><br><span class="line">tags:</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>含义是：</p>
<ul>
<li>title : 文章的标题</li>
<li>date : 该文章的创建时间</li>
<li>tags : 该文章的标记tag</li>
</ul>
<p>依据不同的主题，多标签的语法格式为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tags: </span><br><span class="line">    - 标签1</span><br><span class="line">    - 标签2</span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tags: [标签1,标签2]</span><br></pre></td></tr></table></figure>
<p>你可以添加你所需要的变量，如果觉得每次生成后更改很麻烦，可以在模板文件夹scaffolds下找到post.md文件，编辑它的Front-matter为你想要的变量参数，默认新建博文使用的post模板。</p>
<h5 id="创建自己制定模板"><a href="#创建自己制定模板" class="headerlink" title="创建自己制定模板"></a>创建自己制定模板</h5><p>如果你想使用其他模板，你可以使用下列命令来创建指定模板的博文：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new scaffold &quot;title&quot;</span><br></pre></td></tr></table></figure>
<p>请确保使用的模板scaffold在scaffolds存在。</p>
<h5 id="文章摘要"><a href="#文章摘要" class="headerlink" title="文章摘要"></a>文章摘要</h5><p>这个功能很实用，可以让你在首页文章目录不必显示全部的文章内容，只显示指定摘要。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">以上是摘要</span><br><span class="line">&lt;!--more--&gt;</span><br><span class="line">以下是全文</span><br></pre></td></tr></table></figure>
<hr>
<p>使用markdown编辑好博文后，就可以执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br></pre></td></tr></table></figure>
<p>此命令主要用于部署网页的静态文件，每次修改后都应该首先执行此命令，来重新部署</p>
<p>然后继续执行“hexo s”启动服务。</p>
<p>至此，Hexo的网页部署全部完成，之后就是部署到github上了。</p>
<hr>
<h2 id="部署到github"><a href="#部署到github" class="headerlink" title="部署到github"></a>部署到github</h2><h5 id="1-注册账号"><a href="#1-注册账号" class="headerlink" title="1.注册账号"></a>1.注册账号</h5><p>如果有github账号的，可以忽略，没有请移步<a href="www.github.com">github</a>注册账号</p>
<h5 id="2-创建与你的github用户名对应的仓库"><a href="#2-创建与你的github用户名对应的仓库" class="headerlink" title="2.创建与你的github用户名对应的仓库"></a>2.创建与你的github用户名对应的仓库</h5><p>仓库名字必须为“username.github.io”， 其中“username”为你的用户名</p>
<p><img src="http://7xr7f9.com1.z0.glb.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-03-02%20%E4%B8%8B%E5%8D%8810.38.37.png" alt=""></p>
<p>点击右上角的加号，创建new repository，然后输入“username.github.io”，点击创建。</p>
<h5 id="3-创建Github-Pages"><a href="#3-创建Github-Pages" class="headerlink" title="3.创建Github Pages"></a>3.创建Github Pages</h5><p>repository创建完成后进入以下界面</p>
<p><img src="http://7xr7f9.com1.z0.glb.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-03-02%20%E4%B8%8B%E5%8D%8810.43.20.png" alt=""></p>
<p>点击最右边的Settings</p>
<p>进入后找到创建Github Pages的地方</p>
<p><img src="http://7xr7f9.com1.z0.glb.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-03-02%20%E4%B8%8B%E5%8D%8810.45.28.png" alt=""></p>
<p>点击 Launch automatic page generator<br>最后生成主页：</p>
<p><img src="http://7xr7f9.com1.z0.glb.clouddn.com/github_pages_themes.png" alt=""></p>
<p>之后我们就可以直接访问“username.github.io”，去访问我们的博客了。</p>
<h5 id="4-配置git"><a href="#4-配置git" class="headerlink" title="4.配置git"></a>4.配置git</h5><p>由于mac自带git，所以直接打开终端进行设置</p>
<p>设置用户名密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.email &quot;你的github邮箱&quot;</span><br><span class="line">git config --global user.name &quot;你的github用户名&quot;</span><br></pre></td></tr></table></figure>
<p>生成密钥</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;你的邮箱&quot;</span><br></pre></td></tr></table></figure>
<p>回车之后，打开Finder,前往文件夹[~/.ssh]中会看到生成的两个文件</p>
<blockquote>
<p>id_rsa    id_rsa.pub</p>
</blockquote>
<p>其中id_rsa是私钥，id_rsa.pub是龚玥</p>
<p>然后执行以下命令，添加生成的key</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-add id_rsa</span><br></pre></td></tr></table></figure>
<p>然后将id_rsa.pub中的内容复制下来，在我们github的主页中，点击个人的账户，找到settings–&gt;SSH keys，将我们复制的内容，添加在这里。title随便取个名字就好。</p>
<p>添加成功之后，可以在终端测试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure>
<p>点击回车后输出内容中，最后一句话为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">You&apos;ve successfully authenticated, but github does not provide shell access.</span><br></pre></td></tr></table></figure>
<p>至此，验证成功。</p>
<h5 id="5-最后一步，将我们用Hexo生成的网页部署到github"><a href="#5-最后一步，将我们用Hexo生成的网页部署到github" class="headerlink" title="5.最后一步，将我们用Hexo生成的网页部署到github"></a>5.最后一步，将我们用Hexo生成的网页部署到github</h5><p>在我们的博客根目录下，打开站点配置文件<strong>_config.yml</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="line">deploy: </span><br><span class="line">  type: git</span><br><span class="line">  repository: https://github.com/username/username.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure>
<p>其中“username”为你github的用户名。</p>
<p>修改完保存后，就可以打开终端，cd到博客根目录，执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate #生成静态网页</span><br><span class="line">hexo deploy #部署到github</span><br></pre></td></tr></table></figure>
<p>之后输出以下信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INFO Deploy done: git</span><br></pre></td></tr></table></figure>
<p>说明我们的博客已经部署成功，github pages可能会存在延时，过几分钟后，就可以通过username.github.io去访问我们的博客了！</p>
<hr>
<p><em>本篇主要讲述了使用Hexo进行博客的搭建与配置，以及如何部署到github上，至此我们所有创建博客的工作已经完成。之后便是自己博客的编写与经营了，一些更深入的配置移步<a href="http://icehulu.com/2016/03/02/使用GithubPages-Hexo搭建免费博客（三）/" target="_blank" rel="external">第三篇</a>吧</em></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/博客/">博客</a>, <a href="/tags/Hexo/">Hexo</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>





  <article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-02-25T07:53:51.000Z"><a href="/2016/02/25/使用GithubPages-Hexo搭建免费博客（一）/">2016-02-25</a></time>
      
      
  
    <h1 class="title"><a href="/2016/02/25/使用GithubPages-Hexo搭建免费博客（一）/">使用GithubPages-Hexo搭建免费博客_Mac（一）</a></h1>
  

    </header>
    <div class="entry">
      
        <p><img src="http://7xr7f9.com1.z0.glb.clouddn.com/A5FBB7EA-1FC0-45DD-ACC5-FB49737D9237.png" alt=""></p>
<h3 id="关于MarkDown"><a href="#关于MarkDown" class="headerlink" title="关于MarkDown"></a>关于MarkDown</h3><p>Markdown 是一种用来写作的轻量级「标记语言」，它用简洁的语法代替排版，而不像一般我们用的字处理软件 Word 或 Pages 有大量的排版、字体设置。它使我们专心于码字，用「标记」语法，来代替常见的排版格式。</p>
<p>其详细的介绍，可以看下<a href="http://wowubuntu.com/markdown/#list" target="_blank" rel="external">Markdown 语法说明 (简体中文版)</a></p>
<h5 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h5><ul>
<li>专注你的文字内容，排版样式也只是需要键盘即可搞定</li>
<li>纯文本，兼容所有的文本编辑器与文字处理软件</li>
<li>可读，直观，简介，学习成本低</li>
</ul>
<p>#####<a href="https://www.zybuluo.com/mdeditor" target="_blank" rel="external">Markdown使用示例</a></p>
<h5 id="书写工具"><a href="#书写工具" class="headerlink" title="书写工具"></a>书写工具</h5><p>Mac下有两款优秀的 Markdown 编辑器，<a href="http://25.io/mou/" target="_blank" rel="external">Mou</a>和<a href="http://macdown.uranusjr.com/" target="_blank" rel="external">MacDown</a></p>
<p><img src="http://25.io/mou/Mou_128.png" alt="Mou icon"><br><img src="http://macdown.uranusjr.com/static/base/img/logo-160.png" alt="MacDown logo"></p>
<h2 id="关于其优缺点，可以移步这里-至于选择哪款，看个人喜好。"><a href="#关于其优缺点，可以移步这里-至于选择哪款，看个人喜好。" class="headerlink" title="关于其优缺点，可以移步这里,至于选择哪款，看个人喜好。"></a>关于其优缺点，可以移步<a href="http://www.jianshu.com/p/6c157af09e84" target="_blank" rel="external">这里</a>,至于选择哪款，看个人喜好。</h2><h3 id="关于Hexo"><a href="#关于Hexo" class="headerlink" title="关于Hexo"></a>关于Hexo</h3><p>Hexo是一个快速、简洁且高效的博客框架。Hexo 使用 Markdown（或其他渲染引擎）解析文章，在几秒内，即可利用靓丽的主题生成静态网页。<br><a href="https://hexo.io/zh-cn/" target="_blank" rel="external">Hexo官网</a></p>
<h3 id="关于GithubPages"><a href="#关于GithubPages" class="headerlink" title="关于GithubPages"></a>关于GithubPages</h3><p>在Github里面，每一个项目都拥有它的一个主页，列出项目的源文件，但是对于新手来说，看到那么多的源代码，只会让人感到头晕脑胀，无从下手，他更希望的是，该项目有一个简明易懂的页面，告诉他每一步要怎么去做。</p>
<p>因此，Github就设计了Github Pages这个功能，允许用户自定义项目首页，用来替代默认的源码列表。所以，Github Pages可以被认为是用户编写的、托管在github上的静态网页。</p>
<p>通过上面的介绍，大家对Hexo和Github已经有了大概的了解。<br>我们的方式就是，利用Markdown进行博客的编写，通过Hexo这个框架解析生成靓丽的静态页面，然后部署到Github上供大家浏览。</p>
<h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><ul>
<li>硬件<br>此版本为Mac版👽</li>
<li>软件<ol>
<li>node.js</li>
<li>npm</li>
<li>hexo</li>
<li>github账号</li>
</ol>
</li>
</ul>
<h3 id="安装node-js与npm"><a href="#安装node-js与npm" class="headerlink" title="安装node.js与npm"></a>安装node.js与npm</h3><p>下载node.js 有多种方法：使用 <a href="http://brew.sh/index_zh-cn.html" target="_blank" rel="external">Homebrew</a> 下载 或者直接下载安装包。 建议 node.js 直接下载 安装包，因为使用 brew 有可能失败，会被墙掉。</p>
<p><a href="https://nodejs.org/en/download/" target="_blank" rel="external">node.js下载地址</a> </p>
<p><img src="http://7xr7f9.com1.z0.glb.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-02-26%20%E4%B8%8B%E5%8D%883.37.18.png" alt=""></p>
<p>node.js 下载完成后 安装到电脑上就可以了。安装成功后显示出来安装路径，可以看到 安装node.js 的时候 npm 也安装了。</p>
<p>检测安装是否成功 终端输入 -v , 成功则显示版本号</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ node -v</span><br><span class="line">v4.3.1</span><br><span class="line">$ npm -v</span><br><span class="line">2.14.12</span><br></pre></td></tr></table></figure>
<h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="external">Hexo</a></h3><p>文档里给出了详细的安装方法，只需要按其一步步来就好</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<p>-v表示全局安装，所以需要使用管理员身份</p>
<p>安装成功，使用hexo 命令的时候，可能会出现以下错误</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123; [Error: Cannot find module &apos;./build/Release/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;    </span><br><span class="line">&#123; [Error: Cannot find module &apos;./build/default/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</span><br><span class="line">&#123; [Error: Cannot find module &apos;./build/Debug/DTraceProviderBindings&apos;] code: &apos;MODULE_NOT_FOUND&apos; &#125;</span><br></pre></td></tr></table></figure>
<p>据说是由于GFW的问题，导致安装Hexo的时候少装了几个库。</p>
<p>查询出的解决方法为，使用以下命令行重新安装</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo –no-optional</span><br></pre></td></tr></table></figure>
<p>然而于我而言，并没有什么卵用。这个错误也没有造成任何影响，所以忽略，Go on。<br>完成后，验证下是否安装成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo -v</span><br></pre></td></tr></table></figure>
<h4 id="Hexo的使用"><a href="#Hexo的使用" class="headerlink" title="Hexo的使用"></a>Hexo的使用</h4><h5 id="1-创建存放博客的文件夹"><a href="#1-创建存放博客的文件夹" class="headerlink" title="1. 创建存放博客的文件夹"></a>1. 创建存放博客的文件夹</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir myblog</span><br></pre></td></tr></table></figure>
<h5 id="2-执行以下命令，Hexo会在目标文件夹建立博客所需要的文件"><a href="#2-执行以下命令，Hexo会在目标文件夹建立博客所需要的文件" class="headerlink" title="2. 执行以下命令，Hexo会在目标文件夹建立博客所需要的文件"></a>2. 执行以下命令，Hexo会在目标文件夹建立博客所需要的文件</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>
<p> 输出以下信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO  Cloning hexo-starter to ~/Documents/mytest</span><br><span class="line">Cloning into &apos;/Users/Quncao/Documents/mytest&apos;...</span><br></pre></td></tr></table></figure>
<p>成功之后文件夹的样子<br><img src="http://7xr7f9.com1.z0.glb.clouddn.com/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7%202016-02-26%20%E4%B8%8B%E5%8D%884.13.00.png" alt=""></p>
<ul>
<li>_config.yml : Hexo和站点的配置文件，里面可以设置博客的名字、标题、作者、链接格式等相关项</li>
<li>scaffolds : 脚手架，用于存放我们创建文章时的模版</li>
<li>source : 用于存放我们用markdown编写的博文原文件、其他静态资源文件</li>
<li>themes : 用于存放主题，里面有我们博客的默认主题landscape</li>
</ul>
<h5 id="3-执行以下命令，进行依赖包的安装"><a href="#3-执行以下命令，进行依赖包的安装" class="headerlink" title="3. 执行以下命令，进行依赖包的安装"></a>3. 执行以下命令，进行依赖包的安装</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install</span><br></pre></td></tr></table></figure>
<ul>
<li>node_modules: 关联保存了将会使用到的hexo依赖包</li>
</ul>
<h5 id="4-安装相关插件"><a href="#4-安装相关插件" class="headerlink" title="4. 安装相关插件"></a>4. 安装相关插件</h5><p>插件会安装至node_modules文件夹下，如果已经安装好的可以直接忽略</p>
<ul>
<li><p>安装便于自动部署到Github上的插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装atom生成插件，便于感兴趣的小伙伴们订阅</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装博客首页生成插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-index --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装归档生成插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-archive --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装tag生成插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-tag --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装category生成插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-category --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装Sitemap文件生成插件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装百度Sitemap文件生成插件，因为普通的Sitemap格式不符合百度的要求</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-baidu-sitemap --save</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>未完待续，继续请移步<a href="http://icehulu.com/2016/02/26/%E4%BD%BF%E7%94%A8GithubPages-Hexo%E6%90%AD%E5%BB%BA%E5%85%8D%E8%B4%B9%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89/" target="_blank" rel="external">这里</a></p>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
        
  
  <div class="tags">
    <a href="/tags/博客/">博客</a>, <a href="/tags/Hexo/">Hexo</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>






<nav id="pagination">
  
</nav>
</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Buscar">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  

  
<div class="widget tag">
  <h3 class="title">Entradas Recientes</h3>
  <ul class="entry">
    
      <li>
        <a href="/2016/04/26/XUtils的简单介绍/">XUtils的简单介绍</a>
      </li>
    
      <li>
        <a href="/2016/03/17/Fresco详解/"></a>
      </li>
    
      <li>
        <a href="/2016/03/02/使用GithubPages-Hexo搭建免费博客（三）/">使用GithubPages-Hexo搭建免费博客（三）</a>
      </li>
    
      <li>
        <a href="/2016/02/26/使用GithubPages-Hexo搭建免费博客（二）/">使用GithubPages-Hexo搭建免费博客（二）</a>
      </li>
    
      <li>
        <a href="/2016/02/25/使用GithubPages-Hexo搭建免费博客（一）/">使用GithubPages-Hexo搭建免费博客_Mac（一）</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Etiquetas</h3>
  <ul class="entry">
  
    <li><a href="/tags/Hexo/">Hexo</a><small>3</small></li>
  
    <li><a href="/tags/XUtils3/">XUtils3</a><small>1</small></li>
  
    <li><a href="/tags/博客/">博客</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">Nube de Etiquetas</h3>
  <div class="entry">
    <a href="/tags/Hexo/" style="font-size: 20px;">Hexo</a> <a href="/tags/XUtils3/" style="font-size: 10px;">XUtils3</a> <a href="/tags/博客/" style="font-size: 20px;">博客</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2016 Xiaobo Hu
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="clearfix"></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></footer>
  <script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id='bg'></div>
</body>
</html>